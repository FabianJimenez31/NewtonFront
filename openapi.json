{"openapi":"3.1.0","info":{"title":"CRM Multi-Tenant","description":"Sistema CRM con soporte multi-tenant, Kanban y WebSocket","version":"1.0.0"},"paths":{"/health":{"get":{"summary":"Health Check","description":"Endpoint de verificación de salud del sistema.\nVerifica que la aplicación esté funcionando correctamente.\nUsado por monitoring y balanceadores de carga.","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/auth/login":{"post":{"tags":["Autenticacion"],"summary":"Iniciar sesión","description":"Autentica usuario y retorna token JWT.\n\nValida credenciales contra base de datos del tenant específico.\nGenera token JWT con información del usuario y tenant.\n\nArgs:\n    login_data: Credenciales de login (email, password, tenant_id)\n    db: Conexión a base de datos\n\nReturns:\n    Token JWT y datos del usuario autenticado\n    \nRaises:\n    HTTPException: Si credenciales son incorrectas o usuario inactivo","operationId":"login_api_v1_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/whatsapp/request-code":{"post":{"tags":["Autenticacion"],"summary":"Solicitar código WhatsApp","description":"Solicita código de verificación por WhatsApp para login.\n\nFlujo de autenticación sin contraseñas:\n1. Usuario ingresa email y tenant\n2. Sistema busca usuario y envía código por WhatsApp\n3. Usuario ingresa código para completar login\n\nArgs:\n    request_data: Email y tenant del usuario\n    request: Request HTTP para obtener IP y user agent\n    db: Conexión a base de datos\n\nReturns:\n    Confirmación de envío con ID del código\n    \nRaises:\n    HTTPException: Si usuario no existe o no tiene WhatsApp configurado","operationId":"request_whatsapp_code_api_v1_auth_whatsapp_request_code_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WhatsAppLoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WhatsAppLoginResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/whatsapp/validate-code":{"post":{"tags":["Autenticacion"],"summary":"Validar código WhatsApp","description":"Valida código WhatsApp y completa el login.\n\nSegundo paso del flujo de autenticación WhatsApp:\n1. Usuario ingresa código recibido por WhatsApp\n2. Sistema valida código y genera JWT token\n3. Código se invalida automáticamente\n\nArgs:\n    validation_data: Código y datos de validación\n    request: Request HTTP para auditoría\n    db: Conexión a base de datos\n\nReturns:\n    Token JWT y datos del usuario (mismo formato que login tradicional)\n    \nRaises:\n    HTTPException: Si código es inválido, expirado o ya usado","operationId":"validate_whatsapp_code_api_v1_auth_whatsapp_validate_code_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WhatsAppCodeValidationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/register":{"post":{"tags":["Autenticacion"],"summary":"Registrar nuevo usuario","description":"Registra un nuevo usuario en el sistema.\n\nCrea usuario con validaciones de unicidad de email y username.\nSolo administradores pueden crear usuarios con roles elevados.\n\nArgs:\n    register_data: Datos del nuevo usuario\n    db: Conexión a base de datos\n\nReturns:\n    Confirmación de registro y datos del usuario creado\n    \nRaises:\n    HTTPException: Si email/username ya existen o datos inválidos","operationId":"register_api_v1_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/refresh":{"post":{"tags":["Autenticacion"],"summary":"Renovar token de acceso","description":"Renueva token JWT usando refresh token.\n\nPermite extender sesión sin requerir credenciales nuevamente.\nValida refresh token y genera nuevo access token.\n\nNote: Implementación completa requiere manejo de refresh tokens","operationId":"refresh_token_api_v1_auth_refresh_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/auth/logout":{"post":{"tags":["Autenticacion"],"summary":"Cerrar sesión","description":"Cierra sesión del usuario actual.\n\nEn implementación con JWT stateless, esto es principalmente\ninformativo ya que el token expirará automáticamente.\n\nReturns:\n    Confirmación de logout exitoso","operationId":"logout_api_v1_auth_logout_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/auth/me":{"get":{"tags":["Autenticacion"],"summary":"Obtener datos del usuario actual","description":"Obtiene información del usuario autenticado actualmente.\n\nRetorna datos completos del usuario sin información sensible.\nÚtil para mostrar perfil en interfaz de usuario.\n\nReturns:\n    Datos del usuario actual","operationId":"get_current_user_info_api_v1_auth_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/auth/tenants":{"get":{"tags":["Autenticacion"],"summary":"Listar todos los tenants disponibles (temp en auth)","description":"Lista todos los tenants disponibles en el sistema.\nTEMPORAL: Colocado en auth.py porque users.py tiene problemas de imports.\nSolo system_admin puede ver todos los tenants.","operationId":"get_tenants_temp_api_v1_auth_tenants_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/auth/login-multi-tenant":{"post":{"tags":["Multi-Tenant Auth"],"summary":"Login Multi Tenant","description":"Primer paso del login multi-tenant: autentica usuario sin requerir tenant_id.\n\n**Flujo:**\n1. Usuario envía email y password\n2. Sistema valida credenciales\n3. Retorna token temporal (10 min) y lista de tenants disponibles\n\n**Request:**\n```json\n{\n    \"email\": \"usuario@ejemplo.com\",\n    \"password\": \"password123\"\n}\n```\n\n**Response:**\n```json\n{\n    \"temp_token\": \"eyJ...\",\n    \"user\": {\n        \"id\": \"...\",\n        \"email\": \"usuario@ejemplo.com\",\n        \"username\": \"usuario\",\n        \"full_name\": \"Usuario Ejemplo\"\n    },\n    \"tenants\": [\n        {\n            \"tenant_id\": \"empresa1\",\n            \"tenant_name\": \"Empresa 1 S.A.\",\n            \"role\": \"administrador\",\n            \"status\": \"active\"\n        }\n    ],\n    \"expires_in\": 600\n}\n```","operationId":"login_multi_tenant_api_v1_auth_login_multi_tenant_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginMultiTenantRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginMultiTenantResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/select-tenant":{"post":{"tags":["Multi-Tenant Auth"],"summary":"Select Tenant","description":"Segundo paso del login multi-tenant: selecciona tenant específico.\n\n**Flujo:**\n1. Usuario envía tenant_id seleccionado + token temporal\n2. Sistema valida acceso al tenant\n3. Retorna token final (24 horas) con acceso completo\n\n**Headers:**\n```\nAuthorization: Bearer eyJ_token_temporal_aqui...\n```\n\n**Request:**\n```json\n{\n    \"tenant_id\": \"empresa1\"\n}\n```\n\n**Response:**\n```json\n{\n    \"access_token\": \"eyJ...\",\n    \"token_type\": \"bearer\",\n    \"user\": {\n        \"id\": \"...\",\n        \"email\": \"usuario@ejemplo.com\",\n        \"tenant_id\": \"empresa1\",\n        \"role\": \"administrador\",\n        \"is_active\": true\n    },\n    \"expires_in\": 86400\n}\n```","operationId":"select_tenant_api_v1_auth_select_tenant_post","parameters":[{"name":"authorization","in":"header","required":true,"schema":{"type":"string","description":"Bearer token temporal del paso anterior","title":"Authorization"},"description":"Bearer token temporal del paso anterior"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SelectTenantRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SelectTenantResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/switch-tenant":{"post":{"tags":["Multi-Tenant Auth"],"summary":"Switch Tenant","description":"Cambia de tenant para usuarios con acceso a múltiples tenants.\n\n**Flujo:**\n1. Usuario autenticado envía nuevo tenant_id\n2. Sistema valida acceso al nuevo tenant\n3. Retorna nuevo token (24 horas) con el tenant actualizado\n\n**Headers:**\n```\nAuthorization: Bearer eyJ_token_actual_aqui...\n```\n\n**Request:**\n```json\n{\n    \"tenant_id\": \"empresa2\"\n}\n```\n\n**Response:**\n```json\n{\n    \"access_token\": \"eyJ...\",\n    \"token_type\": \"bearer\",\n    \"user\": {\n        \"id\": \"...\",\n        \"email\": \"usuario@ejemplo.com\",\n        \"tenant_id\": \"empresa2\",\n        \"role\": \"agente\",\n        \"is_active\": true\n    },\n    \"expires_in\": 86400\n}\n```","operationId":"switch_tenant_api_v1_auth_switch_tenant_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SwitchTenantRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SwitchTenantResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/auth/my-tenants":{"get":{"tags":["Multi-Tenant Auth"],"summary":"Listar tenants del usuario autenticado","description":"Lista todos los tenants a los que tiene acceso el usuario autenticado.\nÚtil para mostrar opciones de switch-tenant en el frontend.\n\n**Response:**\n```json\n{\n    \"tenants\": [\n        {\n            \"tenant_id\": \"empresa1\",\n            \"tenant_name\": \"Empresa 1 S.A.\",\n            \"role\": \"administrador\",\n            \"status\": \"active\"\n        },\n        {\n            \"tenant_id\": \"empresa2\",\n            \"tenant_name\": \"Empresa 2 Ltda.\",\n            \"role\": \"agente\",\n            \"status\": \"active\"\n        }\n    ]\n}\n```","operationId":"get_my_tenants_api_v1_auth_my_tenants_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/users/":{"get":{"tags":["Usuarios"],"summary":"Listar usuarios del tenant","description":"Lista todos los usuarios del tenant con paginación y filtros.\n\nSolo supervisores y administradores pueden listar usuarios.\nAutomáticamente filtra por tenant del usuario autenticado.\n\nArgs:\n    skip: Registros a omitir para paginación\n    limit: Máximo de registros a retornar\n    role: Filtro opcional por rol de usuario\n    active_only: Si solo mostrar usuarios activos\n    current_user: Usuario autenticado (inyectado)\n    user_service: Servicio de usuarios (inyectado)\n\nReturns:\n    Lista paginada de usuarios del tenant","operationId":"get_users_api_v1_users__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Número de registros a omitir","default":0,"title":"Skip"},"description":"Número de registros a omitir"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Número máximo de registros a retornar","default":50,"title":"Limit"},"description":"Número máximo de registros a retornar"},{"name":"role","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/UserRole"},{"type":"null"}],"description":"Filtrar por rol específico","title":"Role"},"description":"Filtrar por rol específico"},{"name":"active_only","in":"query","required":false,"schema":{"type":"boolean","description":"Solo usuarios activos","default":true,"title":"Active Only"},"description":"Solo usuarios activos"},{"name":"tenant_filter","in":"query","required":false,"schema":{"type":"string","description":"Filtrar por tenant (solo system_admin puede usar 'all')","title":"Tenant Filter"},"description":"Filtrar por tenant (solo system_admin puede usar 'all')"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserResponse"},"title":"Response Get Users Api V1 Users  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Usuarios"],"summary":"Crear nuevo usuario","description":"Crea un nuevo usuario en el tenant.\n\nSolo administradores pueden crear nuevos usuarios.\nValida que el tenant_id coincida con el del usuario autenticado.\n\nArgs:\n    user_data: Datos del nuevo usuario\n    current_user: Usuario autenticado (inyectado)\n    user_service: Servicio de usuarios (inyectado)\n\nReturns:\n    Datos del usuario creado\n    \nRaises:\n    HTTPException: Si datos inválidos o usuario ya existe","operationId":"create_user_api_v1_users__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/agents":{"get":{"tags":["Usuarios"],"summary":"Listar agentes activos","description":"Lista todos los agentes activos del tenant.\n\nEndpoint optimizado para asignación de leads y notificaciones.\nCualquier usuario autenticado puede ver agentes de su tenant.\n\nReturns:\n    Lista de agentes activos del tenant","operationId":"get_active_agents_api_v1_users_agents_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/UserResponse"},"type":"array","title":"Response Get Active Agents Api V1 Users Agents Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/users/{user_id}":{"get":{"tags":["Usuarios"],"summary":"Obtener usuario por ID","description":"Obtiene un usuario específico por su ID.\n\nSolo supervisores y administradores pueden ver detalles de otros usuarios.\nAutomáticamente valida que el usuario pertenezca al mismo tenant.\n\nArgs:\n    user_id: ID del usuario a obtener\n    current_user: Usuario autenticado (inyectado)\n    user_service: Servicio de usuarios (inyectado)\n\nReturns:\n    Datos del usuario solicitado\n    \nRaises:\n    HTTPException: Si usuario no existe o no pertenece al tenant","operationId":"get_user_api_v1_users__user_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Usuarios"],"summary":"Actualizar usuario","description":"Actualiza un usuario existente del tenant.\n\nSolo administradores pueden actualizar usuarios.\nValida que el usuario pertenezca al mismo tenant.\n\nArgs:\n    user_id: ID del usuario a actualizar\n    user_update: Datos a actualizar\n    current_user: Usuario autenticado (inyectado)\n    user_service: Servicio de usuarios (inyectado)\n\nReturns:\n    Datos del usuario actualizado\n    \nRaises:\n    HTTPException: Si usuario no existe o datos inválidos","operationId":"update_user_api_v1_users__user_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Usuarios"],"summary":"Desactivar usuario","description":"Desactiva un usuario (soft delete).\n\nSolo administradores pueden desactivar usuarios.\nNo elimina el usuario, solo lo marca como inactivo.\n\nArgs:\n    user_id: ID del usuario a desactivar\n    current_user: Usuario autenticado (inyectado)\n    user_service: Servicio de usuarios (inyectado)\n\nReturns:\n    Confirmación de desactivación\n    \nRaises:\n    HTTPException: Si usuario no existe o no se puede desactivar","operationId":"deactivate_user_api_v1_users__user_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/stats/summary":{"get":{"tags":["Usuarios"],"summary":"Estadísticas de usuarios del tenant","description":"Obtiene estadísticas resumidas de usuarios del tenant.\n\nIncluye contadores por rol, usuarios activos/inactivos.\nSolo supervisores y administradores pueden ver estadísticas.\n\nReturns:\n    Estadísticas resumidas de usuarios","operationId":"get_user_statistics_api_v1_users_stats_summary_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/users/{user_id}/toggle-active":{"patch":{"tags":["Usuarios"],"summary":"Cambiar estado activo de usuario","description":"Cambia el estado activo/inactivo de un usuario.\n\nSolo administradores pueden cambiar estados de usuario.\nÚtil para activar/desactivar usuarios rápidamente.\n\nArgs:\n    user_id: ID del usuario a cambiar\n    current_user: Usuario autenticado (inyectado)\n    user_service: Servicio de usuarios (inyectado)\n\nReturns:\n    Usuario con estado actualizado","operationId":"toggle_user_active_status_api_v1_users__user_id__toggle_active_patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/tenants":{"get":{"tags":["Usuarios"],"summary":"Listar todos los tenants disponibles","description":"Lista todos los tenants disponibles en el sistema.\nSOLUCIÓN TEMPORAL: Devuelve tenants hardcoded hasta resolver problema de imports.\n\nReturns:\n    Lista de tenants únicos del sistema","operationId":"get_tenants_api_v1_users_tenants_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/users/generate-password":{"post":{"tags":["Usuarios"],"summary":"Generar contraseña segura","description":"Genera una contraseña segura automáticamente.\n\nSolo administradores pueden generar contraseñas.\nÚtil para crear contraseñas de nuevos usuarios.\n\nArgs:\n    length: Longitud de la contraseña (8-50 caracteres)\n    current_user: Usuario autenticado (inyectado)\n    user_service: Servicio de usuarios (inyectado)\n\nReturns:\n    Contraseña generada de forma segura","operationId":"generate_password_api_v1_users_generate_password_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"length","in":"query","required":false,"schema":{"type":"integer","maximum":50,"minimum":8,"description":"Longitud de la contraseña","default":12,"title":"Length"},"description":"Longitud de la contraseña"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/inbox":{"get":{"tags":["Conversaciones"],"summary":"Get Conversations Inbox","description":"Obtiene la lista de conversaciones activas con información resumida.\nIncluye último mensaje, estado del lead y conteo de mensajes no leídos.\nImplementa paginación correcta respetando los parámetros solicitados.\n\nParámetros de filtrado:\n- search: Buscar por nombre o teléfono del lead\n- status: Filtrar por estado (active, pending, resolved)\n- agent: Filtrar por agente (unassigned, me, agent_id)\n- date_from: Fecha inicio para filtrar por last_interaction (formato YYYY-MM-DD)\n- date_to: Fecha fin para filtrar por last_interaction (formato YYYY-MM-DD)\n\nRespuesta incluye:\n- conversations: Lista de conversaciones paginada\n- total: Total de conversaciones que coinciden con los filtros\n- status_counts: Conteos por estado (pending, unattended, attended, all)\n- stage_counts: Conteos por etapa de funnel_stage\n- Campos de paginación: page, page_size, pages, has_more","operationId":"get_conversations_inbox_api_v1_conversations_inbox_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Buscar por nombre o teléfono","title":"Search"},"description":"Buscar por nombre o teléfono"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filtrar por estado","title":"Status"},"description":"Filtrar por estado"},{"name":"agent","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filtrar por agente","title":"Agent"},"description":"Filtrar por agente"},{"name":"date_from","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Fecha inicio (YYYY-MM-DD)","title":"Date From"},"description":"Fecha inicio (YYYY-MM-DD)"},{"name":"date_to","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Fecha fin (YYYY-MM-DD)","title":"Date To"},"description":"Fecha fin (YYYY-MM-DD)"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/conversation/{lead_id}":{"get":{"tags":["Conversaciones"],"summary":"Get Conversation Detail","description":"Obtiene el detalle completo de una conversación específica.","operationId":"get_conversation_detail_api_v1_conversations_conversation__lead_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/webhook/n8n":{"post":{"tags":["Conversaciones"],"summary":"Procesar respuesta de N8N","description":"Procesa respuestas de N8N con mensajes generados por IA.\n\nEndpoint que recibe las respuestas procesadas por el flujo de N8N\ny las reenvia a traves de Chatwoot al cliente final.\n\nArgs:\n    n8n_data: Datos de respuesta desde N8N incluyendo mensaje generado por IA\n    database: Conexion a base de datos\n\nReturns:\n    Confirmacion del procesamiento","operationId":"n8n_webhook_endpoint_api_v1_conversations_webhook_n8n_post","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"N8N Data"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response N8N Webhook Endpoint Api V1 Conversations Webhook N8N Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/webhook":{"post":{"tags":["Conversaciones"],"summary":"Procesar webhook Chatwoot","description":"Procesa webhooks entrantes de Chatwoot.\n\nARQUITECTURA.md COMPLIANCE:\n- Recibe mensajes UNICAMENTE de Chatwoot (entrada unica)\n- Evolution -> Chatwoot -> CRM (flujo correcto)\n- Procesamiento de logica de negocio y routing IA/Manual\n\nArgs:\n    webhook_data: Datos del evento de webhook de Chatwoot\n    database: Conexion a base de datos\n\nReturns:\n    Resultado del procesamiento del webhook\n    \nNote:\n    Este endpoint debe estar configurado en Chatwoot como webhook URL\n    Evolution debe enviar webhooks a Chatwoot, NO directamente al CRM","operationId":"chatwoot_webhook_endpoint_api_v1_conversations_webhook_post","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Webhook Data"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/webhook/test":{"get":{"tags":["Conversaciones"],"summary":"Test webhook endpoint","description":"Endpoint de prueba para verificar que los webhooks pueden llegar al servidor.","operationId":"test_webhook_endpoint_api_v1_conversations_webhook_test_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/conversations/":{"get":{"tags":["Conversaciones"],"summary":"Listar conversaciones via Chatwoot","description":"Lista conversaciones del tenant obtenidas de Chatwoot.\n\nProxy hacia Chatwoot API manteniendo separacion multi-tenant.\nAdapta formato Chatwoot a estructura esperada por frontend CRM.\n\nArgs:\n    skip: Numero de registros a omitir para paginacion\n    limit: Maximo numero de registros a retornar\n    instance: Filtrar por instancia WhatsApp especifica\n    conversation_status: Filtrar por estado de conversacion\n    recent_hours: Solo conversaciones de las ultimas N horas\n    current_user: Usuario autenticado\n\nReturns:\n    Lista paginada de conversaciones desde Chatwoot","operationId":"list_conversations_api_v1_conversations__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Registros a omitir","default":0,"title":"Skip"},"description":"Registros a omitir"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Maximo de registros","default":50,"title":"Limit"},"description":"Maximo de registros"},{"name":"instance","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filtrar por instancia WhatsApp","title":"Instance"},"description":"Filtrar por instancia WhatsApp"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filtrar por estado","title":"Status"},"description":"Filtrar por estado"},{"name":"recent_hours","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","maximum":168,"minimum":1},{"type":"null"}],"description":"Solo conversaciones de ultimas N horas","title":"Recent Hours"},"description":"Solo conversaciones de ultimas N horas"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response List Conversations Api V1 Conversations  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/{conversation_id}":{"get":{"tags":["Conversaciones"],"summary":"Obtener conversacion via Chatwoot","description":"Obtiene conversacion especifica de Chatwoot con mensajes completos.\n\nProxy hacia Chatwoot API manteniendo separacion multi-tenant.\nIncluye historial completo de mensajes adaptado a formato CRM.\n\nArgs:\n    conversation_id: ID de la conversacion en Chatwoot\n    current_user: Usuario autenticado\n\nReturns:\n    Conversacion completa con mensajes desde Chatwoot\n    \nRaises:\n    HTTPException: Si conversacion no existe o no pertenece al tenant","operationId":"get_conversation_endpoint_api_v1_conversations__conversation_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"string","title":"Conversation Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Conversation Endpoint Api V1 Conversations  Conversation Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/lead/{lead_id}":{"get":{"tags":["Conversaciones"],"summary":"Obtener conversacion por lead via Chatwoot","description":"Obtiene la conversacion asociada a un lead especifico.\n\nUn lead tipicamente tiene una sola conversacion activa.\nUtil para mostrar conversacion desde el dashboard Kanban.\n\nArgs:\n    lead_id: ID del lead\n    current_user: Usuario autenticado\n    lead_service: Servicio de leads\n\nReturns:\n    Conversacion del lead o error si no existe","operationId":"get_lead_conversation_api_v1_conversations_lead__lead_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Lead Conversation Api V1 Conversations Lead  Lead Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/{conversation_id}/toggle-ai":{"patch":{"tags":["Conversaciones"],"summary":"Toggle IA/Humano en conversacion","description":"Activa o desactiva modo IA para conversacion especifica.\n\nControla si mensajes van a bot flow (IA) o a agente humano asignado.\nActualiza configuracion local para routing de mensajes.\n\nArgs:\n    conversation_id: ID de la conversacion en Chatwoot\n    ai_enabled: True para activar IA, False para agente humano\n    current_user: Usuario autenticado\n    database: Conexion a base de datos\n\nReturns:\n    Confirmacion del cambio de modo","operationId":"toggle_ai_mode_api_v1_conversations__conversation_id__toggle_ai_patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"string","title":"Conversation Id"}},{"name":"ai_enabled","in":"query","required":true,"schema":{"type":"boolean","description":"True para activar IA, False para agente humano","title":"Ai Enabled"},"description":"True para activar IA, False para agente humano"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/{conversation_id}/messages":{"post":{"tags":["Conversaciones"],"summary":"Enviar mensaje via Chatwoot","operationId":"send_message_endpoint_api_v1_conversations__conversation_id__messages_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"string","title":"Conversation Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Body"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/poll/messages":{"post":{"tags":["Conversaciones"],"summary":"Polling manual de mensajes desde Chatwoot","description":"Ejecuta polling manual de mensajes desde Chatwoot.\n\nSolución alternativa cuando los webhooks no funcionan.\nBusca mensajes nuevos en Chatwoot y los sincroniza con el CRM.\n\nReturns:\n    Resumen del polling con mensajes encontrados","operationId":"poll_messages_endpoint_api_v1_conversations_poll_messages_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/conversations/poll/status":{"get":{"tags":["Conversaciones"],"summary":"Estado del sistema de polling","description":"Verifica el estado del sistema de mensajes y polling.\n\nReturns:\n    Estado actual del sistema con diagnóstico","operationId":"poll_status_endpoint_api_v1_conversations_poll_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/conversations/send-audio":{"post":{"tags":["Conversaciones","multimedia"],"summary":"Enviar mensaje de audio","description":"Envía mensaje de audio en conversación.\n\nArgs:\n    conversation_id: ID de la conversación\n    audio: Archivo de audio (WebM, WAV, MP3)\n    current_user: Usuario autenticado\n    database: Conexión a base de datos\n    lead_service: Servicio de leads\n\nReturns:\n    Confirmación del envío con información del mensaje","operationId":"send_audio_message_api_v1_conversations_send_audio_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_send_audio_message_api_v1_conversations_send_audio_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/conversations/send-file":{"post":{"tags":["Conversaciones","multimedia"],"summary":"Enviar archivo (imagen o documento)","description":"Envía archivo (imagen o documento) en conversación.\n\nArgs:\n    conversation_id: ID de la conversación\n    file: Archivo a enviar\n    current_user: Usuario autenticado\n    database: Conexión a base de datos\n    lead_service: Servicio de leads\n\nReturns:\n    Confirmación del envío con información del mensaje","operationId":"send_file_message_api_v1_conversations_send_file_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_send_file_message_api_v1_conversations_send_file_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/conversations/priority-inbox":{"get":{"tags":["Conversaciones Prioritarias"],"summary":"Get Priority Conversations","description":"Obtiene conversaciones con sistema de priorización.","operationId":"get_priority_conversations_api_v1_conversations_priority_inbox_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Search"}},{"name":"priority","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Priority"}},{"name":"agent","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":50,"minimum":1,"default":24,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/agents":{"get":{"tags":["Conversaciones Prioritarias"],"summary":"Get Agents List","description":"Obtiene lista de agentes para filtros.","operationId":"get_agents_list_api_v1_conversations_agents_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/leads/":{"get":{"tags":["Leads"],"summary":"Listar leads del tenant","description":"Lista leads del tenant con filtros avanzados y paginación.\n\nAgentes ven todos los leads, pueden filtrar por múltiples criterios.\nSoporta filtros por etapa, agente, prioridad y score.\n\nArgs:\n    skip: Registros a omitir para paginación\n    limit: Máximo registros a retornar\n    stage: Filtrar por etapa específica del funnel\n    assigned_agent_id: Filtrar leads asignados a agente\n    priority: Filtrar por nivel de prioridad\n    min_score: Filtrar leads con score mínimo\n    current_user: Usuario autenticado\n    lead_service: Servicio de leads\n\nReturns:\n    Lista paginada y filtrada de leads","operationId":"get_leads_api_v1_leads__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Registros a omitir","default":0,"title":"Skip"},"description":"Registros a omitir"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Máximo de registros","default":50,"title":"Limit"},"description":"Máximo de registros"},{"name":"stage","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filtrar por etapa","title":"Stage"},"description":"Filtrar por etapa"},{"name":"assigned_agent_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filtrar por agente asignado","title":"Assigned Agent Id"},"description":"Filtrar por agente asignado"},{"name":"priority","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filtrar por prioridad","title":"Priority"},"description":"Filtrar por prioridad"},{"name":"min_score","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","maximum":100,"minimum":0},{"type":"null"}],"description":"Score mínimo","title":"Min Score"},"description":"Score mínimo"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/LeadResponse"},"title":"Response Get Leads Api V1 Leads  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Leads"],"summary":"Crear nuevo lead","description":"Crea un nuevo lead en el tenant.\n\nValida que el tenant_id coincida con el usuario autenticado.\nInicializa lead con etapa por defecto y score inicial.\n\nArgs:\n    lead_data: Datos del nuevo lead\n    current_user: Usuario autenticado\n    lead_service: Servicio de leads\n\nReturns:\n    Lead creado con configuración inicial\n    \nRaises:\n    HTTPException: Si tenant no coincide o datos inválidos","operationId":"create_lead_api_v1_leads__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeadCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/leads/count":{"get":{"summary":"Mock Leads Count","description":"Mock endpoint para desarrollo - evita error 401","operationId":"mock_leads_count_api_v1_leads_count_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/leads/kanban":{"get":{"tags":["Leads"],"summary":"Obtener datos para dashboard Kanban","description":"Obtiene leads organizados para dashboard Kanban.\nRetorna leads agrupados por etapas en formato optimizado.","operationId":"get_kanban_data_api_v1_leads_kanban_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Filtrar leads por número de días","title":"Days"},"description":"Filtrar leads por número de días"},{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Fecha de inicio para rango personalizado (YYYY-MM-DD)","title":"Start Date"},"description":"Fecha de inicio para rango personalizado (YYYY-MM-DD)"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Fecha de fin para rango personalizado (YYYY-MM-DD)","title":"End Date"},"description":"Fecha de fin para rango personalizado (YYYY-MM-DD)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/leads/{lead_id}/detail":{"get":{"tags":["Leads"],"summary":"Obtener detalle completo del lead con conversación","description":"Obtiene el detalle completo de un lead incluyendo su conversación.\n\nUtilizado por el modal de detalle del lead en el frontend.\nRetorna tanto la información del lead como los mensajes de conversación.\n\nArgs:\n    lead_id: ID del lead a obtener\n    current_user: Usuario autenticado\n    lead_service: Servicio de leads\n    conversation_service: Servicio de conversaciones\n\nReturns:\n    Objeto con lead y conversación completa\n    \nRaises:\n    HTTPException: Si lead no existe o no pertenece al tenant","operationId":"get_lead_detail_api_v1_leads__lead_id__detail_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}},{"name":"since","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Timestamp para polling incremental","title":"Since"},"description":"Timestamp para polling incremental"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/leads/{lead_id}/ai-automation":{"patch":{"tags":["Leads"],"summary":"Toggle AI automation for lead","description":"Actualiza el estado de automatización con IA para un lead específico.\n\nArgs:\n    lead_id: ID del lead\n    request: Body con enable_ai (bool) y reason (str) opcional\n    current_user: Usuario autenticado\n    database: Conexión a la base de datos\n\nReturns:\n    Estado actualizado del lead con ai_automation_enabled y automation_status","operationId":"toggle_ai_automation_api_v1_leads__lead_id__ai_automation_patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Request"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/leads/metrics":{"get":{"tags":["Leads"],"summary":"Obtener métricas de leads","description":"Obtiene métricas agregadas de leads para el dashboard.\nIncluye KPIs, distribución por etapas y top leads.","operationId":"get_leads_metrics_api_v1_leads_metrics_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/leads/{lead_id}/debug":{"get":{"tags":["Leads"],"summary":"DEBUG: Obtener datos raw del lead (temporal)","description":"ENDPOINT TEMPORAL DE DEBUG - REMOVER EN PRODUCCIÓN\nObtiene datos raw del lead para debugging.","operationId":"debug_lead_api_v1_leads__lead_id__debug_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/leads/{lead_id}":{"get":{"tags":["Leads"],"summary":"Obtener lead por ID","description":"Obtiene un lead específico con historial completo.\n\nIncluye historial de clasificación, acciones de gestión.\nValida que el lead pertenezca al tenant del usuario.\n\nArgs:\n    lead_id: ID del lead a obtener\n    current_user: Usuario autenticado\n    lead_service: Servicio de leads\n\nReturns:\n    Lead completo con historial\n    \nRaises:\n    HTTPException: Si lead no existe o no pertenece al tenant","operationId":"get_lead_api_v1_leads__lead_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Leads"],"summary":"Actualizar lead","description":"Actualiza un lead existente del tenant.\n\nRegistra cambios en historial de gestión con usuario.\nPermite actualización de datos básicos y asignaciones.\n\nArgs:\n    lead_id: ID del lead a actualizar\n    lead_update: Datos a actualizar\n    current_user: Usuario autenticado\n    lead_service: Servicio de leads\n\nReturns:\n    Lead actualizado con nuevos datos\n    \nRaises:\n    HTTPException: Si lead no existe o datos inválidos","operationId":"update_lead_api_v1_leads__lead_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeadUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/leads/{lead_id}/move":{"patch":{"tags":["Leads"],"summary":"Mover lead en Kanban","description":"Mueve lead a nueva etapa en Kanban.\n\nRegistra movimiento en historial con justificación.\nUsado para drag & drop en interfaz Kanban.\n\nArgs:\n    lead_id: ID del lead a mover\n    move_request: Nueva etapa y notas\n    current_user: Usuario autenticado\n    lead_service: Servicio de leads\n\nReturns:\n    Lead actualizado en nueva etapa\n    \nRaises:\n    HTTPException: Si lead no existe o movimiento inválido","operationId":"move_lead_to_stage_api_v1_leads__lead_id__move_patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeadMoveRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/leads/{lead_id}/assign":{"patch":{"tags":["Leads"],"summary":"Asignar lead a agente","description":"Asigna o desasigna lead a un agente específico.\n\nPermite asignación manual de leads para seguimiento.\nRegistra acción en historial de gestión.\n\nArgs:\n    lead_id: ID del lead a asignar\n    assignment_request: Datos de asignación\n    current_user: Usuario autenticado\n    lead_service: Servicio de leads\n\nReturns:\n    Lead con nueva asignación","operationId":"assign_lead_to_agent_api_v1_leads__lead_id__assign_patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeadAssignmentRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/leads/{lead_id}/classify":{"post":{"tags":["Leads"],"summary":"Clasificar lead manualmente","description":"Aplica clasificación manual de lead.\n\nPermite override de clasificación automática IA.\nRegistra justificación y usuario que realizó el cambio.\n\nArgs:\n    lead_id: ID del lead a clasificar\n    classification_request: Datos de clasificación manual\n    current_user: Usuario autenticado\n    lead_service: Servicio de leads\n\nReturns:\n    Lead con nueva clasificación manual","operationId":"classify_lead_manually_api_v1_leads__lead_id__classify_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeadClassificationRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/leads/{lead_id}/reclassify":{"post":{"tags":["Leads"],"summary":"Reclasificar con IA","description":"Aplica reclasificación automática usando IA.\n\nObtiene mensajes de conversación y aplica análisis IA.\nÚtil para revalidar clasificación con nuevos datos.\n\nArgs:\n    lead_id: ID del lead a reclasificar\n    current_user: Usuario autenticado\n    lead_service: Servicio de leads\n    conversation_service: Servicio de conversaciones\n\nReturns:\n    Lead con nueva clasificación IA","operationId":"reclassify_lead_with_ai_api_v1_leads__lead_id__reclassify_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/leads/stats/summary":{"get":{"tags":["Leads"],"summary":"Estadísticas de leads","description":"Obtiene estadísticas completas de leads del tenant.\n\nIncluye distribución por etapas, scores, conversión.\nÚtil para dashboard analytics y reportes de gestión.\n\nReturns:\n    Estadísticas detalladas de leads y conversión","operationId":"get_lead_statistics_api_v1_leads_stats_summary_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/leads/my-leads":{"get":{"tags":["Leads"],"summary":"Mis leads asignados","description":"Obtiene leads asignados al usuario actual.\n\nVista personalizada para agentes con sus leads.\nIncluye solo leads donde el usuario es el agente asignado.\n\nReturns:\n    Lista de leads asignados al usuario actual","operationId":"get_my_assigned_leads_api_v1_leads_my_leads_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/LeadResponse"},"type":"array","title":"Response Get My Assigned Leads Api V1 Leads My Leads Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/leads/{lead_id}/messages":{"post":{"tags":["Messages"],"summary":"Enviar mensaje a lead","description":"Envía un mensaje a un lead específico.\n\nEl mensaje se guarda en el array de mensajes del lead y se marca como enviado\npor el agente actual. Actualiza la fecha de última interacción.\n\nArgs:\n    lead_id: ID del lead destinatario\n    message_data: Datos del mensaje a enviar\n    current_user: Usuario autenticado que envía el mensaje\n    lead_service: Servicio de leads\n    db: Conexión a base de datos\n\nReturns:\n    Mensaje creado con ID y timestamp\n\nRaises:\n    HTTPException: Si lead no existe o no pertenece al tenant","operationId":"send_message_to_lead_api_v1_leads__lead_id__messages_post","parameters":[{"name":"args","in":"query","required":true,"schema":{"title":"Args"}},{"name":"kwargs","in":"query","required":true,"schema":{"title":"Kwargs"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Messages"],"summary":"Obtener mensajes del lead","description":"Obtiene todos los mensajes de un lead.\n\nRetorna el historial completo de mensajes del lead desde su array embebido.\nÚtil para cargar historial al abrir modal de conversación.\n\nArgs:\n    lead_id: ID del lead\n    current_user: Usuario autenticado\n    lead_service: Servicio de leads\n\nReturns:\n    Array de mensajes del lead\n\nRaises:\n    HTTPException: Si lead no existe o no pertenece al tenant","operationId":"get_lead_messages_api_v1_leads__lead_id__messages_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/kanban/":{"get":{"tags":["Kanban","kanban-config"],"summary":"Obtener configuración Kanban","description":"Obtiene la configuración Kanban activa del tenant.\n\nRetorna etapas, reglas y configuración visual del Kanban.\nCualquier usuario autenticado puede ver la configuración.\n\nReturns:\n    Configuración completa del Kanban del tenant\n\nRaises:\n    HTTPException: Si no hay configuración activa","operationId":"get_kanban_configuration_api_v1_kanban__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KanbanResponse"}}}}},"security":[{"HTTPBearer":[]}]},"post":{"tags":["Kanban","kanban-config"],"summary":"Crear configuración Kanban","description":"Crea nueva configuración Kanban para el tenant.\n\nSolo administradores pueden crear configuraciones.\nValida que no exista configuración previa activa.\n\nArgs:\n    config_data: Datos de la nueva configuración\n    current_user: Usuario autenticado (admin)\n    kanban_service: Servicio Kanban\n\nReturns:\n    Configuración creada\n\nRaises:\n    HTTPException: Si ya existe configuración o datos inválidos","operationId":"create_kanban_configuration_api_v1_kanban__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/KanbanConfigurationCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KanbanResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/kanban/{config_id}":{"put":{"tags":["Kanban","kanban-config"],"summary":"Actualizar configuración Kanban","description":"Actualiza configuración Kanban existente.\n\nSolo administradores pueden modificar configuraciones.\nValida consistencia de etapas y configuración.\n\nArgs:\n    config_id: ID de la configuración a actualizar\n    config_update: Datos a actualizar\n    current_user: Usuario autenticado (admin)\n    kanban_service: Servicio Kanban\n\nReturns:\n    Configuración actualizada\n\nRaises:\n    HTTPException: Si configuración no existe o datos inválidos","operationId":"update_kanban_configuration_api_v1_kanban__config_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"config_id","in":"path","required":true,"schema":{"type":"string","title":"Config Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/KanbanConfigurationUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KanbanResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/kanban/default":{"post":{"tags":["Kanban","kanban-config"],"summary":"Crear configuración por defecto","description":"Crea configuración Kanban por defecto para el tenant.\n\nIncluye etapas estándar del proceso de ventas.\nÚtil para onboarding rápido de nuevos tenants.\n\nArgs:\n    tenant_name: Nombre descriptivo para la configuración\n    current_user: Usuario autenticado (admin)\n    kanban_service: Servicio Kanban\n\nReturns:\n    Configuración por defecto creada","operationId":"create_default_kanban_configuration_api_v1_kanban_default_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"tenant_name","in":"query","required":false,"schema":{"type":"string","description":"Nombre para la configuración","default":"Configuración por defecto","title":"Tenant Name"},"description":"Nombre para la configuración"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KanbanResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/kanban/board":{"get":{"tags":["Kanban","kanban-board"],"summary":"Obtener board completo con leads","description":"Endpoint para SPA: Retorna configuración Kanban + leads agrupados por etapa.\nUsado por la arquitectura SPA para cargar datos iniciales.","operationId":"get_kanban_board_api_v1_kanban_board_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/kanban/stages/":{"get":{"tags":["Kanban","kanban-stages"],"summary":"Listar etapas Kanban","description":"Lista las etapas del Kanban del tenant.","operationId":"get_kanban_stages_api_v1_kanban_stages__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"visible_only","in":"query","required":false,"schema":{"type":"boolean","description":"Solo etapas visibles","default":true,"title":"Visible Only"},"description":"Solo etapas visibles"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/KanbanStage"},"title":"Response Get Kanban Stages Api V1 Kanban Stages  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Kanban","kanban-stages-admin"],"summary":"Agregar nueva etapa","description":"Agrega nueva etapa a la configuración Kanban.","operationId":"add_kanban_stage_api_v1_kanban_stages__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StageCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KanbanResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/kanban/stages/{stage_id}":{"get":{"tags":["Kanban","kanban-stages"],"summary":"Obtener etapa específica","description":"Obtiene una etapa específica del Kanban.","operationId":"get_kanban_stage_api_v1_kanban_stages__stage_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"stage_id","in":"path","required":true,"schema":{"type":"string","title":"Stage Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KanbanStage"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Kanban","kanban-stages-admin"],"summary":"Actualizar etapa","description":"Actualiza una etapa específica del Kanban.","operationId":"update_kanban_stage_api_v1_kanban_stages__stage_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"stage_id","in":"path","required":true,"schema":{"type":"string","title":"Stage Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StageUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KanbanResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Kanban","kanban-stages-admin"],"summary":"Eliminar etapa","description":"Elimina una etapa del Kanban.","operationId":"remove_kanban_stage_api_v1_kanban_stages__stage_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"stage_id","in":"path","required":true,"schema":{"type":"string","title":"Stage Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KanbanResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/kanban/stages/default":{"get":{"tags":["Kanban","kanban-stages"],"summary":"Obtener etapa por defecto","description":"Obtiene la etapa por defecto del tenant.","operationId":"get_default_stage_api_v1_kanban_stages_default_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KanbanStage"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/kanban/validate-transition":{"post":{"tags":["Kanban","kanban-validation"],"summary":"Validar transición","description":"Valida si una transición entre etapas es permitida.\n\nConsulta reglas de transición configuradas en Kanban.\nUsado para validar drag & drop antes de ejecutar.\n\nArgs:\n    validation_request: Etapas origen y destino\n    current_user: Usuario autenticado\n    kanban_service: Servicio Kanban\n\nReturns:\n    Si la transición es válida y razón si no lo es","operationId":"validate_stage_transition_api_v1_kanban_validate_transition_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransitionValidationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransitionValidationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/evolution/webhook":{"post":{"tags":["Evolution API","Secure Evolution Webhooks","Secure Evolution Webhooks"],"summary":"Secure Evolution Webhook Handler","description":"Webhook handler seguro con filtro anti-spam.\nBloquea webhooks de instancias legacy antes de procesamiento.","operationId":"secure_evolution_webhook_handler_api_v1_evolution_webhook_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Secure Evolution Webhook Handler Api V1 Evolution Webhook Post"}}}}}}},"/api/v1/evolution/webhook-resilient":{"post":{"tags":["Evolution API","Evolution Resilient","Evolution Resilient"],"summary":"Resilient Webhook Handler","description":"Webhook con sistema resiliente de 5 puntos:\n1. Guardar webhook RAW antes de procesar\n2. Verificar salud de Celery antes de usar\n3. Fallback sincrónico si Celery falla\n4. Verificación posterior de procesamiento\n5. Alertas inmediatas en caso de fallo","operationId":"resilient_webhook_handler_api_v1_evolution_webhook_resilient_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Resilient Webhook Handler Api V1 Evolution Webhook Resilient Post"}}}}}}},"/api/v1/evolution/verify-processing":{"get":{"tags":["Evolution API","Evolution Resilient","Evolution Resilient"],"summary":"Verify Webhook Processing","description":"Verifica webhooks no procesados y los reprocesa","operationId":"verify_webhook_processing_api_v1_evolution_verify_processing_get","parameters":[{"name":"hours","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Hours"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Verify Webhook Processing Api V1 Evolution Verify Processing Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/evolution/health-status":{"get":{"tags":["Evolution API","Evolution Resilient","Evolution Resilient"],"summary":"Get System Health","description":"Obtiene estado de salud del sistema completo","operationId":"get_system_health_api_v1_evolution_health_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get System Health Api V1 Evolution Health Status Get"}}}}}}},"/api/v1/evolution/ws/stats":{"get":{"tags":["Evolution API","Evolution WebSockets"],"summary":"Get Websocket Stats","description":"Obtiene estadísticas de conexiones WebSocket activas.\nÚtil para monitoreo y debugging del sistema.\n\nReturns:\n    Dict con estadísticas de conexiones activas","operationId":"get_websocket_stats_api_v1_evolution_ws_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/ai/leads/{lead_id}/toggle":{"post":{"tags":["AI Automation","AI Automation"],"summary":"Toggle Ai For Lead","description":"Cambia el estado AI/Manual de un lead específico.\nPermite a agentes tomar control manual o reactivar AI.\n\nArgs:\n    lead_id: ID del lead a modificar\n    toggle_request: Configuración del toggle (enable_ai, reason)\n    current_user: Usuario autenticado que hace el cambio\n    tenant_id: ID del tenant actual\n    database: Conexión a base de datos\n    \nReturns:\n    Estado actualizado del lead con confirmación","operationId":"toggle_ai_for_lead_api_v1_ai_leads__lead_id__toggle_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AIToggleRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Toggle Ai For Lead Api V1 Ai Leads  Lead Id  Toggle Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/leads/{lead_id}/status":{"get":{"tags":["AI Automation","AI Automation"],"summary":"Get Lead Ai Status","description":"Obtiene el estado actual de automatización de un lead.\nIncluye configuración AI/Manual y último agente que hizo cambios.\n\nArgs:\n    lead_id: ID del lead a consultar\n    tenant_id: ID del tenant actual\n    database: Conexión a base de datos\n    \nReturns:\n    Estado completo de automatización del lead","operationId":"get_lead_ai_status_api_v1_ai_leads__lead_id__status_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AIStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/leads/{lead_id}/pause-ai":{"post":{"tags":["AI Automation","AI Automation"],"summary":"Pause Ai For Lead","description":"Pausa la automatización AI para un lead (shortcut para toggle AI off).\nUtilidad para toma rápida de control manual.\n\nArgs:\n    lead_id: ID del lead\n    reason: Razón de la pausa (opcional)\n    current_user: Usuario que pausa AI\n    tenant_id: ID del tenant actual\n    database: Conexión a base de datos\n    \nReturns:\n    Confirmación de pausa con estado actual","operationId":"pause_ai_for_lead_api_v1_ai_leads__lead_id__pause_ai_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}},{"name":"reason","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"default":"Intervención manual","title":"Reason"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Pause Ai For Lead Api V1 Ai Leads  Lead Id  Pause Ai Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/leads/{lead_id}/resume-ai":{"post":{"tags":["AI Automation","AI Automation"],"summary":"Resume Ai For Lead","description":"Reanuda la automatización AI para un lead (shortcut para toggle AI on).\nUtilidad para reactivación rápida de AI después de intervención manual.\n\nArgs:\n    lead_id: ID del lead\n    current_user: Usuario que reanuda AI\n    tenant_id: ID del tenant actual\n    database: Conexión a base de datos\n    \nReturns:\n    Confirmación de reanudación con estado actual","operationId":"resume_ai_for_lead_api_v1_ai_leads__lead_id__resume_ai_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Resume Ai For Lead Api V1 Ai Leads  Lead Id  Resume Ai Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/debug/leads/{lead_id}/toggle":{"post":{"tags":["AI Automation","AI Automation"],"summary":"Debug Toggle Ai For Lead","description":"Endpoint de debugging sin autenticación para probar toggle AI.\nSolo para desarrollo - remover en producción.","operationId":"debug_toggle_ai_for_lead_api_v1_ai_debug_leads__lead_id__toggle_post","parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AIToggleRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Debug Toggle Ai For Lead Api V1 Ai Debug Leads  Lead Id  Toggle Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/debug/leads/{lead_id}/status":{"get":{"tags":["AI Automation","AI Automation"],"summary":"Debug Get Lead Ai Status","description":"Endpoint de debugging sin autenticación para probar AI toggle.\nSolo para desarrollo - remover en producción.","operationId":"debug_get_lead_ai_status_api_v1_ai_debug_leads__lead_id__status_get","parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Debug Get Lead Ai Status Api V1 Ai Debug Leads  Lead Id  Status Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/global-status":{"get":{"tags":["AI Automation","AI Automation"],"summary":"Get Global Ai Status","description":"Obtiene el estado global de la automatización AI.\nIncluye configuración general y estadísticas de uso.\n\nArgs:\n    database: Conexión a base de datos\n    \nReturns:\n    Estado global del sistema AI","operationId":"get_global_ai_status_api_v1_ai_global_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Global Ai Status Api V1 Ai Global Status Get"}}}}}}},"/api/v1/ai/test-n8n":{"post":{"tags":["AI Automation","AI Automation"],"summary":"Test N8N Webhook","description":"Endpoint de prueba para verificar conectividad con N8N.\nEnvía mensaje de prueba al webhook N8N y retorna respuesta.\n\nArgs:\n    test_message: Mensaje de prueba a enviar\n    database: Conexión a base de datos\n    current_user: Usuario autenticado\n    \nReturns:\n    Resultado de la prueba de conectividad N8N","operationId":"test_n8n_webhook_api_v1_ai_test_n8n_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"test_message","in":"query","required":false,"schema":{"type":"string","default":"Test message from CRM","title":"Test Message"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Test N8N Webhook Api V1 Ai Test N8N Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/notify-escalation":{"post":{"tags":["AI Automation","AI Automation"],"summary":"Notify Escalation","description":"Notifica que un mensaje requiere escalación a agente humano.\nLlamado por N8N cuando detecta que necesita intervención humana.\n\nArgs:\n    lead_id: ID del lead que requiere atención\n    reason: Razón de la escalación\n    original_message: Mensaje original que disparó la escalación\n    database: Conexión a base de datos\n    \nReturns:\n    Confirmación de notificación enviada","operationId":"notify_escalation_api_v1_ai_notify_escalation_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EscalationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Notify Escalation Api V1 Ai Notify Escalation Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/log-response":{"post":{"tags":["AI Automation","AI Automation"],"summary":"Log Ai Response","description":"Registra respuesta de AI enviada por N8N.\nGuarda en base de datos para auditoría y análisis.\n\nArgs:\n    lead_id: ID del lead\n    message_sent: Mensaje enviado por AI\n    ai_processed: Si fue procesado por AI o no\n    timestamp: Timestamp del mensaje\n    database: Conexión a base de datos\n    \nReturns:\n    Confirmación de registro guardado","operationId":"log_ai_response_api_v1_ai_log_response_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LogResponseRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Log Ai Response Api V1 Ai Log Response Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai-config/tenant/{tenant_id}":{"get":{"tags":["AI Configuration","AI Configuration"],"summary":"Get Tenant Configuration","description":"Obtiene configuración completa de AI para un tenant.","operationId":"get_tenant_configuration_api_v1_ai_config_tenant__tenant_id__get","parameters":[{"name":"tenant_id","in":"path","required":true,"schema":{"type":"string","title":"Tenant Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Tenant Configuration Api V1 Ai Config Tenant  Tenant Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai-config/tenant/{tenant_id}/upload-catalog":{"post":{"tags":["AI Configuration","AI Configuration"],"summary":"Upload Product Catalog","description":"Sube archivo de catálogo de productos para un tenant.\nSoporta CSV, Excel y PDF.","operationId":"upload_product_catalog_api_v1_ai_config_tenant__tenant_id__upload_catalog_post","parameters":[{"name":"tenant_id","in":"path","required":true,"schema":{"type":"string","title":"Tenant Id"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_product_catalog_api_v1_ai_config_tenant__tenant_id__upload_catalog_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductUploadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai-config/tenant/{tenant_id}/business-info":{"put":{"tags":["AI Configuration","AI Configuration"],"summary":"Update Business Info","description":"Actualiza información del negocio para un tenant.","operationId":"update_business_info_api_v1_ai_config_tenant__tenant_id__business_info_put","parameters":[{"name":"tenant_id","in":"path","required":true,"schema":{"type":"string","title":"Tenant Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BusinessInfo"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Update Business Info Api V1 Ai Config Tenant  Tenant Id  Business Info Put"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai-config/tenant/{tenant_id}/bot-configuration":{"put":{"tags":["AI Configuration","AI Configuration"],"summary":"Update Bot Configuration","description":"Actualiza configuración del bot (personalidad, instrucciones, reglas).","operationId":"update_bot_configuration_api_v1_ai_config_tenant__tenant_id__bot_configuration_put","parameters":[{"name":"tenant_id","in":"path","required":true,"schema":{"type":"string","title":"Tenant Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BotConfigurationRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Update Bot Configuration Api V1 Ai Config Tenant  Tenant Id  Bot Configuration Put"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai-config/tenant/{tenant_id}/settings":{"put":{"tags":["AI Configuration","AI Configuration"],"summary":"Update Ai Settings","description":"Actualiza configuración general de AI para un tenant.","operationId":"update_ai_settings_api_v1_ai_config_tenant__tenant_id__settings_put","parameters":[{"name":"tenant_id","in":"path","required":true,"schema":{"type":"string","title":"Tenant Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConfigurationUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Update Ai Settings Api V1 Ai Config Tenant  Tenant Id  Settings Put"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai-config/tenant/{tenant_id}/catalog":{"delete":{"tags":["AI Configuration","AI Configuration"],"summary":"Delete Product Catalog","description":"Elimina catálogo de productos de un tenant.","operationId":"delete_product_catalog_api_v1_ai_config_tenant__tenant_id__catalog_delete","parameters":[{"name":"tenant_id","in":"path","required":true,"schema":{"type":"string","title":"Tenant Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Delete Product Catalog Api V1 Ai Config Tenant  Tenant Id  Catalog Delete"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai-config/tenant/{tenant_id}/catalog-preview":{"get":{"tags":["AI Configuration","AI Configuration"],"summary":"Get Catalog Preview","description":"Obtiene preview del catálogo de productos de un tenant.","operationId":"get_catalog_preview_api_v1_ai_config_tenant__tenant_id__catalog_preview_get","parameters":[{"name":"tenant_id","in":"path","required":true,"schema":{"type":"string","title":"Tenant Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Catalog Preview Api V1 Ai Config Tenant  Tenant Id  Catalog Preview Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai-config/tenant/{tenant_id}/rag-context":{"get":{"tags":["AI Configuration","AI Configuration"],"summary":"Get Rag Context","description":"Obtiene contexto RAG completo para debugging.","operationId":"get_rag_context_api_v1_ai_config_tenant__tenant_id__rag_context_get","parameters":[{"name":"tenant_id","in":"path","required":true,"schema":{"type":"string","title":"Tenant Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Rag Context Api V1 Ai Config Tenant  Tenant Id  Rag Context Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai-config/tenant/{tenant_id}/test-search":{"post":{"tags":["AI Configuration","AI Configuration"],"summary":"Test Semantic Search","description":"Endpoint de testing para búsqueda semántica.","operationId":"test_semantic_search_api_v1_ai_config_tenant__tenant_id__test_search_post","parameters":[{"name":"tenant_id","in":"path","required":true,"schema":{"type":"string","title":"Tenant Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Request"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Test Semantic Search Api V1 Ai Config Tenant  Tenant Id  Test Search Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/specialists/create":{"post":{"tags":["Specialists","Specialists"],"summary":"Create Specialist","description":"Paso 1 del wizard: Crear un nuevo especialista con personalidad.","operationId":"create_specialist_api_v1_specialists_create_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSpecialistRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Create Specialist Api V1 Specialists Create Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/specialists/{specialist_id}/documents":{"post":{"tags":["Specialists","Specialists"],"summary":"Upload Specialist Document","description":"Paso 2 del wizard: Subir documentos para el RAG del especialista.","operationId":"upload_specialist_document_api_v1_specialists__specialist_id__documents_post","parameters":[{"name":"specialist_id","in":"path","required":true,"schema":{"type":"string","title":"Specialist Id"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_specialist_document_api_v1_specialists__specialist_id__documents_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Upload Specialist Document Api V1 Specialists  Specialist Id  Documents Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/specialists/{specialist_id}/test":{"post":{"tags":["Specialists","Specialists"],"summary":"Test Specialist","description":"Paso 3 del wizard: Probar el especialista con mensajes.","operationId":"test_specialist_api_v1_specialists__specialist_id__test_post","parameters":[{"name":"specialist_id","in":"path","required":true,"schema":{"type":"string","title":"Specialist Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SpecialistTestMessage"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SpecialistTestResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/specialists/{specialist_id}/publish":{"post":{"tags":["Specialists","Specialists"],"summary":"Publish Specialist","description":"Paso final: Publicar el especialista asignándolo a una instancia de Evolution.","operationId":"publish_specialist_api_v1_specialists__specialist_id__publish_post","parameters":[{"name":"specialist_id","in":"path","required":true,"schema":{"type":"string","title":"Specialist Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublishSpecialistRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Publish Specialist Api V1 Specialists  Specialist Id  Publish Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/specialists/list":{"get":{"tags":["Specialists","Specialists"],"summary":"List Specialists","description":"Lista todos los especialistas del tenant.","operationId":"list_specialists_api_v1_specialists_list_get","parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/SpecialistStatus"},{"type":"null"}],"title":"Status"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response List Specialists Api V1 Specialists List Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/specialists/{specialist_id}":{"get":{"tags":["Specialists","Specialists"],"summary":"Get Specialist","description":"Obtiene los detalles completos de un especialista.","operationId":"get_specialist_api_v1_specialists__specialist_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"specialist_id","in":"path","required":true,"schema":{"type":"string","title":"Specialist Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Specialist Api V1 Specialists  Specialist Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Specialists","Specialists"],"summary":"Update Specialist","description":"Actualiza la configuración de un especialista.","operationId":"update_specialist_api_v1_specialists__specialist_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"specialist_id","in":"path","required":true,"schema":{"type":"string","title":"Specialist Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSpecialistRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Update Specialist Api V1 Specialists  Specialist Id  Put"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Specialists","Specialists"],"summary":"Archive Specialist","description":"Archiva un especialista (soft delete).","operationId":"archive_specialist_api_v1_specialists__specialist_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"specialist_id","in":"path","required":true,"schema":{"type":"string","title":"Specialist Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Archive Specialist Api V1 Specialists  Specialist Id  Delete"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/specialists/evolution/instances":{"get":{"tags":["Specialists","Specialists"],"summary":"Get Available Evolution Instances","description":"Obtiene las instancias de Evolution API disponibles.","operationId":"get_available_evolution_instances_api_v1_specialists_evolution_instances_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Available Evolution Instances Api V1 Specialists Evolution Instances Get"}}}}}}},"/api/v1/settings/wizard":{"get":{"tags":["Settings","Settings","Settings Wizard","Wizard Settings"],"summary":"Wizard Home","description":"Página principal del wizard con estado actual de la configuración\nMuestra configuración existente y contadores de uso","operationId":"wizard_home_api_v1_settings_wizard_get","parameters":[{"name":"tenant_id","in":"query","required":false,"schema":{"type":"string","default":"celucambio_main","title":"Tenant Id"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/settings/wizard/navigation/{step}":{"get":{"tags":["Settings","Settings","Settings Wizard","Wizard Settings"],"summary":"Wizard Navigation","description":"Navegación entre pasos del wizard con validación","operationId":"wizard_navigation_api_v1_settings_wizard_navigation__step__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"step","in":"path","required":true,"schema":{"type":"integer","title":"Step"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/settings/wizard/progress":{"get":{"tags":["Settings","Settings","Settings Wizard","Wizard Settings"],"summary":"Wizard Progress","description":"Obtener progreso actual del wizard para el tenant","operationId":"wizard_progress_api_v1_settings_wizard_progress_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Wizard Progress Api V1 Settings Wizard Progress Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/settings/wizard/reset":{"post":{"tags":["Settings","Settings","Settings Wizard","Wizard Settings"],"summary":"Reset Wizard","description":"Reiniciar wizard - solo para administradores","operationId":"reset_wizard_api_v1_settings_wizard_reset_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/settings/wizard/step1":{"get":{"tags":["Settings","Settings","Settings Wizard","Wizard Step 1"],"summary":"Step1 Business Page","description":"Renderizar página SSR del Paso 1 - Conocer el Negocio\nDatos pre-cargados desde MongoDB antes de enviar HTML","operationId":"step1_business_page_api_v1_settings_wizard_step1_get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/api/v1/settings/wizard/step1/process":{"post":{"tags":["Settings","Settings","Settings Wizard","Wizard Step 1"],"summary":"Process Business Data","description":"Procesar información básica del negocio (versión simplificada)","operationId":"process_business_data_api_v1_settings_wizard_step1_process_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_process_business_data_api_v1_settings_wizard_step1_process_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/settings/wizard/step1/validate":{"post":{"tags":["Settings","Settings","Settings Wizard","Wizard Step 1"],"summary":"Validate Business Summary","description":"Validar y aprobar el resumen del negocio generado por AI","operationId":"validate_business_summary_api_v1_settings_wizard_step1_validate_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_validate_business_summary_api_v1_settings_wizard_step1_validate_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/settings/wizard/step1/analyze-website":{"post":{"tags":["Settings","Settings","Settings Wizard","Wizard Step 1"],"summary":"Analyze Website Automatic","description":"Analizar automáticamente un sitio web y generar system prompt personalizado\nbasado en el propósito del bot especificado por el usuario","operationId":"analyze_website_automatic_api_v1_settings_wizard_step1_analyze_website_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_analyze_website_automatic_api_v1_settings_wizard_step1_analyze_website_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/settings/wizard/step1/update-system-prompt":{"post":{"tags":["Settings","Settings","Settings Wizard","Wizard Step 1"],"summary":"Update System Prompt","description":"Actualizar el system prompt en la configuración de AI del tenant","operationId":"update_system_prompt_api_v1_settings_wizard_step1_update_system_prompt_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_update_system_prompt_api_v1_settings_wizard_step1_update_system_prompt_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/settings/wizard/step2":{"get":{"tags":["Settings","Settings","Settings Wizard","Wizard Step 2"],"summary":"Step2 Catalog Page","description":"Renderizar página SSR del Paso 2 - Catálogo de Productos con estado actual","operationId":"step2_catalog_page_api_v1_settings_wizard_step2_get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/api/v1/settings/wizard/step2/upload-catalog":{"post":{"tags":["Settings","Settings","Settings Wizard","Wizard Step 2"],"summary":"Upload Catalog Step2","description":"Upload de catálogo de productos en el paso 2 del wizard","operationId":"upload_catalog_step2_api_v1_settings_wizard_step2_upload_catalog_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"access_token","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_catalog_step2_api_v1_settings_wizard_step2_upload_catalog_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/settings/wizard/step2/skip":{"post":{"tags":["Settings","Settings","Settings Wizard","Wizard Step 2"],"summary":"Skip Catalog Step2","description":"Saltar el paso 2 (sin catálogo RAG) y continuar al paso 3","operationId":"skip_catalog_step2_api_v1_settings_wizard_step2_skip_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_skip_catalog_step2_api_v1_settings_wizard_step2_skip_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/settings/wizard/step2/upload":{"post":{"tags":["Settings","Settings","Settings Wizard","Wizard Step 2"],"summary":"Upload Catalog Alias","description":"Alias del endpoint upload-catalog para compatibilidad con el template","operationId":"upload_catalog_alias_api_v1_settings_wizard_step2_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_catalog_alias_api_v1_settings_wizard_step2_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/settings/wizard/step2/validate":{"post":{"tags":["Settings","Settings","Settings Wizard","Wizard Step 2"],"summary":"Validate Catalog Step2","description":"Validar y aprobar el catálogo cargado","operationId":"validate_catalog_step2_api_v1_settings_wizard_step2_validate_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_validate_catalog_step2_api_v1_settings_wizard_step2_validate_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/settings/wizard/step2/clear":{"delete":{"tags":["Settings","Settings","Settings Wizard","Wizard Step 2"],"summary":"Clear Catalog Step2","description":"Limpiar catálogo cargado","operationId":"clear_catalog_step2_api_v1_settings_wizard_step2_clear_delete","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_clear_catalog_step2_api_v1_settings_wizard_step2_clear_delete"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/settings/wizard/step3":{"get":{"tags":["Settings","Settings","Settings Wizard","Wizard Step 3"],"summary":"Step3 Summary Page","description":"Renderizar página SSR del Paso 3 - Resumen de Configuración (sin auth)\nMuestra todo lo configurado en pasos anteriores","operationId":"step3_summary_page_api_v1_settings_wizard_step3_get","parameters":[{"name":"tenant_id","in":"query","required":false,"schema":{"type":"string","default":"celucambio_main","title":"Tenant Id"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/settings/wizard/step3/activate":{"post":{"tags":["Settings","Settings","Settings Wizard","Wizard Step 3"],"summary":"Activate Bot Configuration","description":"Activar configuración completa del bot","operationId":"activate_bot_configuration_api_v1_settings_wizard_step3_activate_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_activate_bot_configuration_api_v1_settings_wizard_step3_activate_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/settings/wizard/step3/configure":{"post":{"tags":["Settings","Settings","Settings Wizard","Wizard Step 3"],"summary":"Configure Bot Personalization","description":"Configurar personalización del bot (endpoint opcional para ajustes adicionales)","operationId":"configure_bot_personalization_api_v1_settings_wizard_step3_configure_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_configure_bot_personalization_api_v1_settings_wizard_step3_configure_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/settings/wizard/step3/test":{"get":{"tags":["Settings","Settings","Settings Wizard","Wizard Step 3"],"summary":"Test Bot Config","description":"Probar configuración actual del bot con respuestas simuladas","operationId":"test_bot_config_api_v1_settings_wizard_step3_test_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/settings/wizard/step3/finalize":{"post":{"tags":["Settings","Settings","Settings Wizard","Wizard Step 3"],"summary":"Finalize Wizard","description":"Finalizar wizard y activar configuración del bot","operationId":"finalize_wizard_api_v1_settings_wizard_step3_finalize_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/settings/specialists":{"get":{"tags":["Settings","Settings"],"summary":"Specialists Page","description":"Página de gestión de Especialistas AI.\nWizard para crear, configurar y publicar especialistas con RAG dedicado.","operationId":"specialists_page_api_v1_settings_specialists_get","parameters":[{"name":"tenant_id","in":"query","required":false,"schema":{"type":"string","default":"celucambio_main","title":"Tenant Id"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/settings/api-docs":{"get":{"tags":["Settings","Settings"],"summary":"Api Documentation","description":"Documentación de APIs para desarrolladores.","operationId":"api_documentation_api_v1_settings_api_docs_get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/api/v1/settings/prompt-optimization/progress/{progress_id}":{"get":{"tags":["Settings","Settings"],"summary":"Prompt Optimization Progress Page","description":"Página SSR que muestra el progreso del análisis.","operationId":"prompt_optimization_progress_page_api_v1_settings_prompt_optimization_progress__progress_id__get","parameters":[{"name":"progress_id","in":"path","required":true,"schema":{"type":"string","title":"Progress Id"}},{"name":"tenant_id","in":"query","required":false,"schema":{"type":"string","default":"celucambio_main","title":"Tenant Id"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/settings/prompt-optimization":{"get":{"tags":["Settings","Settings"],"summary":"Prompt Optimization Page","description":"Página SSR de optimización de prompts con datos pre-cargados.","operationId":"prompt_optimization_page_api_v1_settings_prompt_optimization_get","parameters":[{"name":"tenant_id","in":"query","required":false,"schema":{"type":"string","default":"celucambio_main","title":"Tenant Id"}},{"name":"analysis","in":"query","required":false,"schema":{"type":"string","title":"Analysis"}},{"name":"optimize","in":"query","required":false,"schema":{"type":"string","title":"Optimize"}},{"name":"score","in":"query","required":false,"schema":{"type":"number","title":"Score"}},{"name":"issues","in":"query","required":false,"schema":{"type":"integer","title":"Issues"}},{"name":"version","in":"query","required":false,"schema":{"type":"string","title":"Version"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/settings/prompt-optimization/hallucination-report":{"get":{"tags":["Settings","Settings"],"summary":"Hallucination Report Page","description":"Página SSR de reporte de alucinaciones.","operationId":"hallucination_report_page_api_v1_settings_prompt_optimization_hallucination_report_get","parameters":[{"name":"tenant_id","in":"query","required":false,"schema":{"type":"string","default":"celucambio_main","title":"Tenant Id"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/settings/analysis-detail/{analysis_id}":{"get":{"tags":["Settings","Settings"],"summary":"Analysis Detail Page","description":"Página SSR que muestra el detalle de un análisis específico.","operationId":"analysis_detail_page_api_v1_settings_analysis_detail__analysis_id__get","parameters":[{"name":"analysis_id","in":"path","required":true,"schema":{"type":"string","title":"Analysis Id"}},{"name":"tenant_id","in":"query","required":false,"schema":{"type":"string","default":"celucambio_main","title":"Tenant Id"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/settings/update-system-prompt":{"post":{"tags":["Settings","Settings"],"summary":"Update System Prompt From Modal","description":"Actualizar el System Prompt desde el modal de configuración.\nEndpoint para actualización rápida sin pasar por el wizard completo.","operationId":"update_system_prompt_from_modal_api_v1_settings_update_system_prompt_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_update_system_prompt_from_modal_api_v1_settings_update_system_prompt_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/settings/debug/lead/{identifier}":{"get":{"tags":["Settings","Settings"],"summary":"Debug Lead","description":"Debug endpoint para buscar información detallada de un lead.\nSolo accesible para usuarios admin autenticados.","operationId":"debug_lead_api_v1_settings_debug_lead__identifier__get","parameters":[{"name":"identifier","in":"path","required":true,"schema":{"type":"string","title":"Identifier"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/settings/debug/webhooks/test":{"get":{"tags":["Settings","Settings"],"summary":"Test Webhooks","description":"Test de conectividad con webhooks y Evolution API.\nSolo accesible para usuarios admin.","operationId":"test_webhooks_api_v1_settings_debug_webhooks_test_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/settings/debug/sync/status":{"get":{"tags":["Settings","Settings"],"summary":"Sync Status","description":"Estado de sincronización Evolution <-> CRM.\nSolo accesible para usuarios admin.","operationId":"sync_status_api_v1_settings_debug_sync_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/settings/debug/tenant/stats":{"get":{"tags":["Settings","Settings"],"summary":"Tenant Stats","description":"Estadísticas completas del tenant.\nSolo accesible para usuarios admin.","operationId":"tenant_stats_api_v1_settings_debug_tenant_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/performance/metrics":{"get":{"tags":["Performance"],"summary":"Obtener métricas de rendimiento del sistema","description":"Obtiene métricas completas de rendimiento del sistema.\nIncluye métricas de sistema, agentes y servicios externos.\nUsado para dashboard de rendimiento con SSR.","operationId":"get_performance_metrics_api_v1_performance_metrics_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/performance/services/health":{"get":{"tags":["Performance"],"summary":"Verificar estado de servicios externos","description":"Verifica el estado de servicios externos integrados.\nIncluye Evolution API, MongoDB y otros servicios.\nUsado para monitoreo de integraciones.","operationId":"check_external_services_api_v1_performance_services_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/prompt-optimization/analyze-conversations/{tenant_id}":{"post":{"tags":["Prompt Optimization","Prompt Optimization"],"summary":"Analyze Conversations","description":"Analiza las últimas 20 conversaciones para detectar patrones robóticos y alucinaciones.\nSiempre toma las más recientes sin importar el parámetro days_back.\nRedirige de vuelta a la página de optimización con resultados.","operationId":"analyze_conversations_api_v1_prompt_optimization_analyze_conversations__tenant_id__post","parameters":[{"name":"tenant_id","in":"path","required":true,"schema":{"type":"string","title":"Tenant Id"}},{"name":"days_back","in":"query","required":false,"schema":{"type":"integer","default":30,"title":"Days Back"}},{"name":"sample_size","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Sample Size"}},{"name":"auto_optimize","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Auto Optimize"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/prompt-optimization/progress/{progress_id}":{"get":{"tags":["Prompt Optimization","Prompt Optimization"],"summary":"Get Analysis Progress","description":"Obtiene el progreso actual del análisis.","operationId":"get_analysis_progress_api_v1_prompt_optimization_progress__progress_id__get","parameters":[{"name":"progress_id","in":"path","required":true,"schema":{"type":"string","title":"Progress Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/prompt-optimization/efficiency-dashboard/{tenant_id}":{"get":{"tags":["Prompt Optimization","Prompt Optimization"],"summary":"Get Efficiency Dashboard","description":"Dashboard de eficiencia del prompt con métricas en tiempo real.","operationId":"get_efficiency_dashboard_api_v1_prompt_optimization_efficiency_dashboard__tenant_id__get","parameters":[{"name":"tenant_id","in":"path","required":true,"schema":{"type":"string","title":"Tenant Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/prompt-optimization/optimize-prompt/{tenant_id}":{"post":{"tags":["Prompt Optimization","Prompt Optimization"],"summary":"Optimize Prompt","description":"Optimiza el prompt automáticamente basado en el último análisis.","operationId":"optimize_prompt_api_v1_prompt_optimization_optimize_prompt__tenant_id__post","parameters":[{"name":"tenant_id","in":"path","required":true,"schema":{"type":"string","title":"Tenant Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/prompt-optimization/hallucination-report/{tenant_id}":{"get":{"tags":["Prompt Optimization","Prompt Optimization"],"summary":"Get Hallucination Report","description":"Reporte detallado de alucinaciones detectadas.","operationId":"get_hallucination_report_api_v1_prompt_optimization_hallucination_report__tenant_id__get","parameters":[{"name":"tenant_id","in":"path","required":true,"schema":{"type":"string","title":"Tenant Id"}},{"name":"days_back","in":"query","required":false,"schema":{"type":"integer","default":30,"title":"Days Back"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/notifications/":{"get":{"tags":["Notifications"],"summary":"Get Notifications","description":"Obtiene notificaciones pendientes para el usuario actual.\n\nReturns:\n    Lista de notificaciones con prioridad y timestamps","operationId":"get_notifications_api_v1_notifications__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Response Get Notifications Api V1 Notifications  Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/notifications/counts":{"get":{"tags":["Notifications"],"summary":"Get Notification Counts","description":"Obtiene contadores de notificaciones por tipo.\n\nReturns:\n    Contadores de mensajes sin atender y seguimientos pendientes","operationId":"get_notification_counts_api_v1_notifications_counts_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":{"type":"integer"},"type":"object","title":"Response Get Notification Counts Api V1 Notifications Counts Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/notifications/mark-attended/{lead_id}":{"post":{"tags":["Notifications"],"summary":"Mark Conversation Attended","description":"Marca una conversación como atendida por el usuario actual.\n\nArgs:\n    lead_id: ID del lead atendido\n    \nReturns:\n    Confirmación de que la conversación fue marcada como atendida","operationId":"mark_conversation_attended_api_v1_notifications_mark_attended__lead_id__post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"boolean"},"title":"Response Mark Conversation Attended Api V1 Notifications Mark Attended  Lead Id  Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/alerts/system-alerts":{"get":{"tags":["System Alerts"],"summary":"Get System Alerts","description":"Obtiene alertas del sistema","operationId":"get_system_alerts_api_v1_alerts_system_alerts_get","parameters":[{"name":"hours","in":"query","required":false,"schema":{"type":"integer","description":"Horas hacia atrás","default":24,"title":"Hours"},"description":"Horas hacia atrás"},{"name":"severity","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filtrar por severidad","title":"Severity"},"description":"Filtrar por severidad"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","description":"Límite de resultados","default":100,"title":"Limit"},"description":"Límite de resultados"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get System Alerts Api V1 Alerts System Alerts Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/alerts/alerts/unresolved":{"get":{"tags":["System Alerts"],"summary":"Get Unresolved Alerts","description":"Obtiene alertas no resueltas críticas","operationId":"get_unresolved_alerts_api_v1_alerts_alerts_unresolved_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Unresolved Alerts Api V1 Alerts Alerts Unresolved Get"}}}}}}},"/api/v1/alerts/alerts/{alert_id}/acknowledge":{"post":{"tags":["System Alerts"],"summary":"Acknowledge Alert","description":"Marca una alerta como reconocida","operationId":"acknowledge_alert_api_v1_alerts_alerts__alert_id__acknowledge_post","parameters":[{"name":"alert_id","in":"path","required":true,"schema":{"type":"string","title":"Alert Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Acknowledge Alert Api V1 Alerts Alerts  Alert Id  Acknowledge Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/alerts/alerts/summary":{"get":{"tags":["System Alerts"],"summary":"Get Alerts Summary","description":"Resumen ejecutivo de alertas para dashboard","operationId":"get_alerts_summary_api_v1_alerts_alerts_summary_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Alerts Summary Api V1 Alerts Alerts Summary Get"}}}}}}},"/api/v1/conversion-reports/generate":{"post":{"tags":["Conversion Reports","Conversion Reports"],"summary":"Generate Conversion Report","description":"Genera reporte completo de conversión por fuentes.\n\nAnaliza leads en un período específico y calcula:\n- Tasas de conversión por fuente\n- Valor total y promedio por conversión\n- ROI por canal de adquisición\n- Días promedio hasta conversión","operationId":"generate_conversion_report_api_v1_conversion_reports_generate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversionAnalysisRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversionReport"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/conversion-reports/summary":{"get":{"tags":["Conversion Reports","Conversion Reports"],"summary":"Get Source Performance Summary","description":"Obtiene resumen rápido de performance por fuentes.\n\nRetorna métricas resumidas para el dashboard:\n- Leads y conversiones por fuente\n- Tasas de conversión\n- Valor total por fuente","operationId":"get_source_performance_summary_api_v1_conversion_reports_summary_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"description":"Días hacia atrás para analizar","default":30,"title":"Days"},"description":"Días hacia atrás para analizar"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversion-reports/trends/daily":{"get":{"tags":["Conversion Reports","Conversion Reports"],"summary":"Get Daily Conversion Trends","description":"Obtiene tendencias diarias de conversión.\n\nMuestra evolución día a día de:\n- Número de conversiones\n- Valor total por día\n- Tendencias por fuente","operationId":"get_daily_conversion_trends_api_v1_conversion_reports_trends_daily_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":90,"minimum":7,"description":"Días hacia atrás para analizar","default":30,"title":"Days"},"description":"Días hacia atrás para analizar"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversion-reports/sources":{"get":{"tags":["Conversion Reports","Conversion Reports"],"summary":"Get Available Sources","description":"Obtiene lista de fuentes disponibles en el sistema.\n\nRetorna todas las fuentes configuradas para filtros.","operationId":"get_available_sources_api_v1_conversion_reports_sources_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/conversion-reports/metrics/comparison":{"get":{"tags":["Conversion Reports","Conversion Reports"],"summary":"Compare Sources Performance","description":"Compara performance entre fuentes específicas.\n\nPermite análisis comparativo detallado entre 2-5 fuentes.","operationId":"compare_sources_performance_api_v1_conversion_reports_metrics_comparison_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"sources","in":"query","required":true,"schema":{"type":"array","items":{"type":"string"},"description":"Fuentes a comparar","title":"Sources"},"description":"Fuentes a comparar"},{"name":"date_from","in":"query","required":false,"schema":{"type":"string","description":"Fecha inicio (ISO format)","title":"Date From"},"description":"Fecha inicio (ISO format)"},{"name":"date_to","in":"query","required":false,"schema":{"type":"string","description":"Fecha fin (ISO format)","title":"Date To"},"description":"Fecha fin (ISO format)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversion-reports/export/csv":{"get":{"tags":["Conversion Reports","Conversion Reports"],"summary":"Export Conversion Report Csv","description":"Exporta reporte de conversión en formato CSV.\n\nGenera archivo CSV con datos detallados para análisis externo.","operationId":"export_conversion_report_csv_api_v1_conversion_reports_export_csv_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"date_from","in":"query","required":true,"schema":{"type":"string","description":"Fecha inicio (ISO format)","title":"Date From"},"description":"Fecha inicio (ISO format)"},{"name":"date_to","in":"query","required":true,"schema":{"type":"string","description":"Fecha fin (ISO format)","title":"Date To"},"description":"Fecha fin (ISO format)"},{"name":"sources","in":"query","required":false,"schema":{"anyOf":[{"type":"array","items":{"type":"string"}},{"type":"null"}],"description":"Fuentes a incluir","title":"Sources"},"description":"Fuentes a incluir"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/source-analytics/summary":{"get":{"tags":["Source Analytics","Source Analytics"],"summary":"Get Source Summary","description":"Resumen general de rendimiento de todas las fuentes de leads.\n\nRetorna métricas consolidadas de WhatsApp directo vs Facebook Ads,\nincluyendo tasas de conversión y fuentes top.","operationId":"get_source_summary_api_v1_source_analytics_summary_get","parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"description":"Días hacia atrás para analizar","default":30,"title":"Days"},"description":"Días hacia atrás para analizar"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/source-analytics/campaigns/facebook":{"get":{"tags":["Source Analytics","Source Analytics"],"summary":"Get Facebook Campaigns Analysis","description":"Análisis detallado de campañas de Facebook Ads.\n\nRetorna rendimiento individual de cada campaña con métricas de leads,\ndías activos, y clasificación por tier de rendimiento.","operationId":"get_facebook_campaigns_analysis_api_v1_source_analytics_campaigns_facebook_get","parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"description":"Días hacia atrás para analizar","default":30,"title":"Days"},"description":"Días hacia atrás para analizar"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/source-analytics/quality":{"get":{"tags":["Source Analytics","Source Analytics"],"summary":"Get Quality Metrics","description":"Métricas de calidad de leads por fuente.\n\nIncluye tasas de respuesta, engagement ratio, y scores de calidad\npara identificar las fuentes que generan leads de mayor valor.","operationId":"get_quality_metrics_api_v1_source_analytics_quality_get","parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"description":"Días hacia atrás para analizar","default":30,"title":"Days"},"description":"Días hacia atrás para analizar"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/source-analytics/performance":{"get":{"tags":["Source Analytics","Source Analytics"],"summary":"Get Performance Metrics","description":"Métricas de rendimiento y distribución temporal de leads.\n\nIncluye volúmenes por fuente, distribución horaria, y tendencias semanales\npara optimización de horarios de anuncios.","operationId":"get_performance_metrics_api_v1_source_analytics_performance_get","parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"description":"Días hacia atrás para analizar","default":30,"title":"Days"},"description":"Días hacia atrás para analizar"},{"name":"source_filter","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filtrar por fuente específica","title":"Source Filter"},"description":"Filtrar por fuente específica"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/source-analytics/roi-projection":{"get":{"tags":["Source Analytics","Source Analytics"],"summary":"Get Roi Projection","description":"Proyección de ROI basada en fuentes de leads.\n\nCalcula inversión estimada en Facebook Ads vs leads orgánicos,\ncon proyecciones de costo por lead y recomendaciones de presupuesto.","operationId":"get_roi_projection_api_v1_source_analytics_roi_projection_get","parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"description":"Días hacia atrás para analizar","default":30,"title":"Days"},"description":"Días hacia atrás para analizar"},{"name":"cost_per_lead","in":"query","required":false,"schema":{"type":"number","minimum":0,"description":"Costo estimado por lead en COP","default":5000,"title":"Cost Per Lead"},"description":"Costo estimado por lead en COP"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/source-analytics/export":{"get":{"tags":["Source Analytics","Source Analytics"],"summary":"Export Analytics Report","description":"Exporta reporte completo de analytics en formato especificado.\n\nGenera un reporte consolidado con todas las métricas disponibles\npara análisis externo o presentaciones ejecutivas.","operationId":"export_analytics_report_api_v1_source_analytics_export_get","parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"description":"Días hacia atrás para analizar","default":30,"title":"Days"},"description":"Días hacia atrás para analizar"},{"name":"format","in":"query","required":false,"schema":{"type":"string","pattern":"^(json|csv)$","description":"Formato de exportación","default":"json","title":"Format"},"description":"Formato de exportación"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/metrics/agents":{"get":{"tags":["Metrics Integrated"],"summary":"Agents Metrics Page","description":"Métricas de agentes - Alias directo al tab de agentes en metrics.html.\nAccesible vía /agents/metrics o /api/v1/metrics/agents","operationId":"agents_metrics_page_api_v1_metrics_agents_get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/api/v1/metrics/integrated":{"get":{"tags":["Metrics Integrated"],"summary":"Metrics Integrated Page","description":"Integrated metrics page with source analytics.\nCombines essential CRM metrics with lead source analysis.","operationId":"metrics_integrated_page_api_v1_metrics_integrated_get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/api/v1/enhanced-performance/enhanced-metrics":{"get":{"tags":["Enhanced Performance"],"summary":"Get Enhanced Metrics","description":"Obtiene métricas mejoradas para el dashboard de performance","operationId":"get_enhanced_metrics_api_v1_enhanced_performance_enhanced_metrics_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"date_from","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Fecha inicio (YYYY-MM-DD)","title":"Date From"},"description":"Fecha inicio (YYYY-MM-DD)"},{"name":"date_to","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Fecha fin (YYYY-MM-DD)","title":"Date To"},"description":"Fecha fin (YYYY-MM-DD)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/enhanced-performance/source-analysis":{"get":{"tags":["Enhanced Performance"],"summary":"Get Source Analysis","description":"Análisis detallado de fuentes de leads","operationId":"get_source_analysis_api_v1_enhanced_performance_source_analysis_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"date_from","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Fecha inicio (YYYY-MM-DD)","title":"Date From"},"description":"Fecha inicio (YYYY-MM-DD)"},{"name":"date_to","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Fecha fin (YYYY-MM-DD)","title":"Date To"},"description":"Fecha fin (YYYY-MM-DD)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/enhanced-performance/conversation-metrics":{"get":{"tags":["Enhanced Performance"],"summary":"Get Conversation Metrics","description":"Métricas de conversaciones y engagement","operationId":"get_conversation_metrics_api_v1_enhanced_performance_conversation_metrics_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"date_from","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Fecha inicio (YYYY-MM-DD)","title":"Date From"},"description":"Fecha inicio (YYYY-MM-DD)"},{"name":"date_to","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Fecha fin (YYYY-MM-DD)","title":"Date To"},"description":"Fecha fin (YYYY-MM-DD)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/enhanced-performance/ai-automation-status":{"get":{"tags":["Enhanced Performance"],"summary":"Get Ai Automation Status","description":"Estado de automatización IA","operationId":"get_ai_automation_status_api_v1_enhanced_performance_ai_automation_status_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"date_from","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Fecha inicio (YYYY-MM-DD)","title":"Date From"},"description":"Fecha inicio (YYYY-MM-DD)"},{"name":"date_to","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Fecha fin (YYYY-MM-DD)","title":"Date To"},"description":"Fecha fin (YYYY-MM-DD)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/enhanced-performance/score-distribution":{"get":{"tags":["Enhanced Performance"],"summary":"Get Score Distribution","description":"Distribución detallada de scores","operationId":"get_score_distribution_api_v1_enhanced_performance_score_distribution_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"date_from","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Fecha inicio (YYYY-MM-DD)","title":"Date From"},"description":"Fecha inicio (YYYY-MM-DD)"},{"name":"date_to","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Fecha fin (YYYY-MM-DD)","title":"Date To"},"description":"Fecha fin (YYYY-MM-DD)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/enhanced-performance/test-filters":{"get":{"tags":["Enhanced Performance"],"summary":"Test Filters","description":"Endpoint de prueba para verificar que los filtros funcionan sin autenticación","operationId":"test_filters_api_v1_enhanced_performance_test_filters_get","parameters":[{"name":"date_from","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Fecha inicio (YYYY-MM-DD)","title":"Date From"},"description":"Fecha inicio (YYYY-MM-DD)"},{"name":"date_to","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Fecha fin (YYYY-MM-DD)","title":"Date To"},"description":"Fecha fin (YYYY-MM-DD)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agent-reports/agents/metrics":{"get":{"tags":["Agent Reports & Metrics"],"summary":"Get All Agents Metrics","description":"Obtiene métricas agregadas de todos los agentes","operationId":"get_all_agents_metrics_api_v1_agent_reports_agents_metrics_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","description":"Días hacia atrás para el reporte","default":30,"title":"Days"},"description":"Días hacia atrás para el reporte"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agent-reports/agents/{agent_id}/metrics":{"get":{"tags":["Agent Reports & Metrics"],"summary":"Get Agent Metrics","description":"Obtiene métricas detalladas de un agente específico","operationId":"get_agent_metrics_api_v1_agent_reports_agents__agent_id__metrics_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}},{"name":"days","in":"query","required":false,"schema":{"type":"integer","description":"Días hacia atrás","default":30,"title":"Days"},"description":"Días hacia atrás"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agent-reports/agents/{agent_id}/interventions":{"get":{"tags":["Agent Reports & Metrics"],"summary":"Get Agent Interventions","description":"Obtiene historial de intervenciones de un agente","operationId":"get_agent_interventions_api_v1_agent_reports_agents__agent_id__interventions_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agent-reports/leads/{lead_id}/interventions":{"get":{"tags":["Agent Reports & Metrics"],"summary":"Get Lead Interventions","description":"Obtiene historial de intervenciones de un lead","operationId":"get_lead_interventions_api_v1_agent_reports_leads__lead_id__interventions_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"default":10,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agent-reports/escalations/summary":{"get":{"tags":["Agent Reports & Metrics"],"summary":"Get Escalations Summary","description":"Obtiene resumen de escalamientos","operationId":"get_escalations_summary_api_v1_agent_reports_escalations_summary_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","description":"Días hacia atrás","default":30,"title":"Days"},"description":"Días hacia atrás"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agent-reports/escalations/trends":{"get":{"tags":["Agent Reports & Metrics"],"summary":"Get Escalation Trends","description":"Obtiene tendencias de escalamientos por día","operationId":"get_escalation_trends_api_v1_agent_reports_escalations_trends_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":90,"default":30,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agent-reports/escalations/by-time":{"get":{"tags":["Agent Reports & Metrics"],"summary":"Get Escalations By Time","description":"Obtiene distribución de escalamientos por hora del día","operationId":"get_escalations_by_time_api_v1_agent_reports_escalations_by_time_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":90,"default":30,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agent-reports/interventions/export":{"get":{"tags":["Agent Reports & Metrics"],"summary":"Export Interventions","description":"Exporta intervenciones en formato CSV o JSON","operationId":"export_interventions_api_v1_agent_reports_interventions_export_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"format","in":"query","required":false,"schema":{"type":"string","pattern":"^(csv|json)$","default":"csv","title":"Format"}},{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"default":30,"title":"Days"}},{"name":"agent_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/reports/outbound/metrics":{"get":{"tags":["Outbound Reports"],"summary":"Get Outbound Metrics","description":"Obtiene métricas completas de reconexión outbound","operationId":"get_outbound_metrics_api_v1_reports_outbound_metrics_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","description":"Días hacia atrás para el reporte","default":30,"title":"Days"},"description":"Días hacia atrás para el reporte"},{"name":"reminder_types","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Tipos de recordatorio separados por coma (10min,noon,evening)","title":"Reminder Types"},"description":"Tipos de recordatorio separados por coma (10min,noon,evening)"},{"name":"hour_start","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Hora de inicio para filtrar (0-23)","title":"Hour Start"},"description":"Hora de inicio para filtrar (0-23)"},{"name":"hour_end","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Hora de fin para filtrar (0-23)","title":"Hour End"},"description":"Hora de fin para filtrar (0-23)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/reports/outbound/export":{"get":{"tags":["Outbound Reports"],"summary":"Export Outbound Data","description":"Exporta datos detallados de reconexión outbound","operationId":"export_outbound_data_api_v1_reports_outbound_export_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","description":"Días hacia atrás para el reporte","default":30,"title":"Days"},"description":"Días hacia atrás para el reporte"},{"name":"reminder_types","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Tipos de recordatorio separados por coma","title":"Reminder Types"},"description":"Tipos de recordatorio separados por coma"},{"name":"format","in":"query","required":false,"schema":{"type":"string","description":"Formato de exportación (csv, json)","default":"csv","title":"Format"},"description":"Formato de exportación (csv, json)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/reports/outbound/summary":{"get":{"tags":["Outbound Reports"],"summary":"Get Outbound Summary","description":"Obtiene resumen rápido de métricas outbound","operationId":"get_outbound_summary_api_v1_reports_outbound_summary_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","description":"Días hacia atrás para el resumen","default":7,"title":"Days"},"description":"Días hacia atrás para el resumen"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/settings":{"get":{"tags":["Settings Main","Settings Main"],"summary":"Settings Main Page","description":"Endpoint principal de settings con autenticación por cookies.\nAhora usa JWT desde cookies HTTP-only para soportar SSR.","operationId":"settings_main_page_settings_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"access_token","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/settings/":{"get":{"tags":["Settings Main","Settings Main"],"summary":"Settings Main Page","description":"Endpoint principal de settings con autenticación por cookies.\nAhora usa JWT desde cookies HTTP-only para soportar SSR.","operationId":"settings_main_page_settings__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"access_token","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/settings/wizard":{"get":{"tags":["Settings Frontend","Settings","Settings Wizard","Wizard Settings"],"summary":"Wizard Home","description":"Página principal del wizard con estado actual de la configuración\nMuestra configuración existente y contadores de uso","operationId":"wizard_home_settings_wizard_get","parameters":[{"name":"tenant_id","in":"query","required":false,"schema":{"type":"string","default":"celucambio_main","title":"Tenant Id"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/settings/wizard/step1":{"get":{"tags":["Settings Frontend","Settings","Settings Wizard","Wizard Step 1"],"summary":"Step1 Business Page","description":"Renderizar página SSR del Paso 1 - Conocer el Negocio\nDatos pre-cargados desde MongoDB antes de enviar HTML","operationId":"step1_business_page_settings_wizard_step1_get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/settings/wizard/step1/process":{"post":{"tags":["Settings Frontend","Settings","Settings Wizard","Wizard Step 1"],"summary":"Process Business Data","description":"Procesar información básica del negocio (versión simplificada)","operationId":"process_business_data_settings_wizard_step1_process_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_process_business_data_settings_wizard_step1_process_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/settings/wizard/step1/validate":{"post":{"tags":["Settings Frontend","Settings","Settings Wizard","Wizard Step 1"],"summary":"Validate Business Summary","description":"Validar y aprobar el resumen del negocio generado por AI","operationId":"validate_business_summary_settings_wizard_step1_validate_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_validate_business_summary_settings_wizard_step1_validate_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/settings/wizard/step1/analyze-website":{"post":{"tags":["Settings Frontend","Settings","Settings Wizard","Wizard Step 1"],"summary":"Analyze Website Automatic","description":"Analizar automáticamente un sitio web y generar system prompt personalizado\nbasado en el propósito del bot especificado por el usuario","operationId":"analyze_website_automatic_settings_wizard_step1_analyze_website_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_analyze_website_automatic_settings_wizard_step1_analyze_website_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/settings/wizard/step1/update-system-prompt":{"post":{"tags":["Settings Frontend","Settings","Settings Wizard","Wizard Step 1"],"summary":"Update System Prompt","description":"Actualizar el system prompt en la configuración de AI del tenant","operationId":"update_system_prompt_settings_wizard_step1_update_system_prompt_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_update_system_prompt_settings_wizard_step1_update_system_prompt_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/settings/wizard/step2":{"get":{"tags":["Settings Frontend","Settings","Settings Wizard","Wizard Step 2"],"summary":"Step2 Catalog Page","description":"Renderizar página SSR del Paso 2 - Catálogo de Productos con estado actual","operationId":"step2_catalog_page_settings_wizard_step2_get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/settings/wizard/step2/upload-catalog":{"post":{"tags":["Settings Frontend","Settings","Settings Wizard","Wizard Step 2"],"summary":"Upload Catalog Step2","description":"Upload de catálogo de productos en el paso 2 del wizard","operationId":"upload_catalog_step2_settings_wizard_step2_upload_catalog_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"access_token","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_catalog_step2_settings_wizard_step2_upload_catalog_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/settings/wizard/step2/skip":{"post":{"tags":["Settings Frontend","Settings","Settings Wizard","Wizard Step 2"],"summary":"Skip Catalog Step2","description":"Saltar el paso 2 (sin catálogo RAG) y continuar al paso 3","operationId":"skip_catalog_step2_settings_wizard_step2_skip_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_skip_catalog_step2_settings_wizard_step2_skip_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/settings/wizard/step2/upload":{"post":{"tags":["Settings Frontend","Settings","Settings Wizard","Wizard Step 2"],"summary":"Upload Catalog Alias","description":"Alias del endpoint upload-catalog para compatibilidad con el template","operationId":"upload_catalog_alias_settings_wizard_step2_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_catalog_alias_settings_wizard_step2_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/settings/wizard/step2/validate":{"post":{"tags":["Settings Frontend","Settings","Settings Wizard","Wizard Step 2"],"summary":"Validate Catalog Step2","description":"Validar y aprobar el catálogo cargado","operationId":"validate_catalog_step2_settings_wizard_step2_validate_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_validate_catalog_step2_settings_wizard_step2_validate_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/settings/wizard/step2/clear":{"delete":{"tags":["Settings Frontend","Settings","Settings Wizard","Wizard Step 2"],"summary":"Clear Catalog Step2","description":"Limpiar catálogo cargado","operationId":"clear_catalog_step2_settings_wizard_step2_clear_delete","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_clear_catalog_step2_settings_wizard_step2_clear_delete"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/settings/wizard/step3":{"get":{"tags":["Settings Frontend","Settings","Settings Wizard","Wizard Step 3"],"summary":"Step3 Summary Page","description":"Renderizar página SSR del Paso 3 - Resumen de Configuración (sin auth)\nMuestra todo lo configurado en pasos anteriores","operationId":"step3_summary_page_settings_wizard_step3_get","parameters":[{"name":"tenant_id","in":"query","required":false,"schema":{"type":"string","default":"celucambio_main","title":"Tenant Id"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/settings/wizard/step3/activate":{"post":{"tags":["Settings Frontend","Settings","Settings Wizard","Wizard Step 3"],"summary":"Activate Bot Configuration","description":"Activar configuración completa del bot","operationId":"activate_bot_configuration_settings_wizard_step3_activate_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_activate_bot_configuration_settings_wizard_step3_activate_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/settings/wizard/step3/configure":{"post":{"tags":["Settings Frontend","Settings","Settings Wizard","Wizard Step 3"],"summary":"Configure Bot Personalization","description":"Configurar personalización del bot (endpoint opcional para ajustes adicionales)","operationId":"configure_bot_personalization_settings_wizard_step3_configure_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_configure_bot_personalization_settings_wizard_step3_configure_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/settings/wizard/step3/test":{"get":{"tags":["Settings Frontend","Settings","Settings Wizard","Wizard Step 3"],"summary":"Test Bot Config","description":"Probar configuración actual del bot con respuestas simuladas","operationId":"test_bot_config_settings_wizard_step3_test_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/settings/wizard/step3/finalize":{"post":{"tags":["Settings Frontend","Settings","Settings Wizard","Wizard Step 3"],"summary":"Finalize Wizard","description":"Finalizar wizard y activar configuración del bot","operationId":"finalize_wizard_settings_wizard_step3_finalize_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/settings/wizard/navigation/{step}":{"get":{"tags":["Settings Frontend","Settings","Settings Wizard","Wizard Settings"],"summary":"Wizard Navigation","description":"Navegación entre pasos del wizard con validación","operationId":"wizard_navigation_settings_wizard_navigation__step__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"step","in":"path","required":true,"schema":{"type":"integer","title":"Step"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/settings/wizard/progress":{"get":{"tags":["Settings Frontend","Settings","Settings Wizard","Wizard Settings"],"summary":"Wizard Progress","description":"Obtener progreso actual del wizard para el tenant","operationId":"wizard_progress_settings_wizard_progress_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Wizard Progress Settings Wizard Progress Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/settings/wizard/reset":{"post":{"tags":["Settings Frontend","Settings","Settings Wizard","Wizard Settings"],"summary":"Reset Wizard","description":"Reiniciar wizard - solo para administradores","operationId":"reset_wizard_settings_wizard_reset_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/settings/specialists":{"get":{"tags":["Settings Frontend","Settings"],"summary":"Specialists Page","description":"Página de gestión de Especialistas AI.\nWizard para crear, configurar y publicar especialistas con RAG dedicado.","operationId":"specialists_page_settings_specialists_get","parameters":[{"name":"tenant_id","in":"query","required":false,"schema":{"type":"string","default":"celucambio_main","title":"Tenant Id"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/settings/api-docs":{"get":{"tags":["Settings Frontend","Settings"],"summary":"Api Documentation","description":"Documentación de APIs para desarrolladores.","operationId":"api_documentation_settings_api_docs_get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/settings/prompt-optimization/progress/{progress_id}":{"get":{"tags":["Settings Frontend","Settings"],"summary":"Prompt Optimization Progress Page","description":"Página SSR que muestra el progreso del análisis.","operationId":"prompt_optimization_progress_page_settings_prompt_optimization_progress__progress_id__get","parameters":[{"name":"progress_id","in":"path","required":true,"schema":{"type":"string","title":"Progress Id"}},{"name":"tenant_id","in":"query","required":false,"schema":{"type":"string","default":"celucambio_main","title":"Tenant Id"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/settings/prompt-optimization":{"get":{"tags":["Settings Frontend","Settings"],"summary":"Prompt Optimization Page","description":"Página SSR de optimización de prompts con datos pre-cargados.","operationId":"prompt_optimization_page_settings_prompt_optimization_get","parameters":[{"name":"tenant_id","in":"query","required":false,"schema":{"type":"string","default":"celucambio_main","title":"Tenant Id"}},{"name":"analysis","in":"query","required":false,"schema":{"type":"string","title":"Analysis"}},{"name":"optimize","in":"query","required":false,"schema":{"type":"string","title":"Optimize"}},{"name":"score","in":"query","required":false,"schema":{"type":"number","title":"Score"}},{"name":"issues","in":"query","required":false,"schema":{"type":"integer","title":"Issues"}},{"name":"version","in":"query","required":false,"schema":{"type":"string","title":"Version"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/settings/prompt-optimization/hallucination-report":{"get":{"tags":["Settings Frontend","Settings"],"summary":"Hallucination Report Page","description":"Página SSR de reporte de alucinaciones.","operationId":"hallucination_report_page_settings_prompt_optimization_hallucination_report_get","parameters":[{"name":"tenant_id","in":"query","required":false,"schema":{"type":"string","default":"celucambio_main","title":"Tenant Id"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/settings/analysis-detail/{analysis_id}":{"get":{"tags":["Settings Frontend","Settings"],"summary":"Analysis Detail Page","description":"Página SSR que muestra el detalle de un análisis específico.","operationId":"analysis_detail_page_settings_analysis_detail__analysis_id__get","parameters":[{"name":"analysis_id","in":"path","required":true,"schema":{"type":"string","title":"Analysis Id"}},{"name":"tenant_id","in":"query","required":false,"schema":{"type":"string","default":"celucambio_main","title":"Tenant Id"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/settings/update-system-prompt":{"post":{"tags":["Settings Frontend","Settings"],"summary":"Update System Prompt From Modal","description":"Actualizar el System Prompt desde el modal de configuración.\nEndpoint para actualización rápida sin pasar por el wizard completo.","operationId":"update_system_prompt_from_modal_settings_update_system_prompt_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_update_system_prompt_from_modal_settings_update_system_prompt_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/settings/debug/lead/{identifier}":{"get":{"tags":["Settings Frontend","Settings"],"summary":"Debug Lead","description":"Debug endpoint para buscar información detallada de un lead.\nSolo accesible para usuarios admin autenticados.","operationId":"debug_lead_settings_debug_lead__identifier__get","parameters":[{"name":"identifier","in":"path","required":true,"schema":{"type":"string","title":"Identifier"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/settings/debug/webhooks/test":{"get":{"tags":["Settings Frontend","Settings"],"summary":"Test Webhooks","description":"Test de conectividad con webhooks y Evolution API.\nSolo accesible para usuarios admin.","operationId":"test_webhooks_settings_debug_webhooks_test_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/settings/debug/sync/status":{"get":{"tags":["Settings Frontend","Settings"],"summary":"Sync Status","description":"Estado de sincronización Evolution <-> CRM.\nSolo accesible para usuarios admin.","operationId":"sync_status_settings_debug_sync_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/settings/debug/tenant/stats":{"get":{"tags":["Settings Frontend","Settings"],"summary":"Tenant Stats","description":"Estadísticas completas del tenant.\nSolo accesible para usuarios admin.","operationId":"tenant_stats_settings_debug_tenant_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/webhooks/n8n":{"post":{"summary":"Procesar respuesta de N8N","description":"Procesa respuestas de N8N con mensajes generados por IA.\n\nIntegración:\n- Respuestas IA se envían via Evolution API directamente\n- Los mensajes se almacenan localmente y se envían a WhatsApp\n- Evolution API mantiene el estado de entrega\n\nArgs:\n    n8n_data: Datos de respuesta desde N8N incluyendo mensaje generado por IA\n    database: Conexión a base de datos\n\nReturns:\n    Confirmación del procesamiento","operationId":"process_n8n_webhook_api_webhooks_n8n_post","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"N8N Data"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Process N8N Webhook Api Webhooks N8N Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/svelte-dev/kanban/__data.json":{"get":{"summary":"Kanban Data","description":"Endpoint que simula la carga de datos del servidor para SvelteKit kanban.\nReplica el comportamiento de +page.server.ts","operationId":"kanban_data_svelte_dev_kanban___data_json_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/":{"get":{"summary":"Root Redirect","description":"Redirige la raíz del sitio al login.\nPunto de entrada principal para usuarios no autenticados.","operationId":"root_redirect__get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/login":{"get":{"summary":"Login Page","description":"Página de login con formulario de autenticación.\nConecta con endpoint /api/v1/auth/login para autenticacion.","operationId":"login_page_login_get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/dashboard":{"get":{"summary":"Dashboard Page","description":"Dashboard principal con Kanban board.\nRequiere autenticacion previa, carga datos via JavaScript.","operationId":"dashboard_page_dashboard_get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/leads":{"get":{"summary":"Leads Page","description":"Página de gestión de leads con vista Kanban.\nAlias del dashboard para acceso directo a gestión de leads.","operationId":"leads_page_leads_get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/users":{"get":{"summary":"Users Page","description":"Página de gestión de usuarios.\nNueva interfaz modular dedicada exclusivamente a gestión de usuarios.","operationId":"users_page_users_get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/api/v1/conversations/list":{"get":{"tags":["conversations"],"summary":"Get Conversations List","description":"Obtiene lista de conversaciones para el panel principal.\nOptimizado para SSR con datos completos.","operationId":"get_conversations_list_api_v1_conversations_list_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Search"}},{"name":"tab","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"default":"all","title":"Tab"}},{"name":"agent","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent"}},{"name":"priority","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Priority"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/stats":{"get":{"tags":["conversations"],"summary":"Get Conversation Stats","description":"Obtiene estadísticas generales del panel de conversaciones.","operationId":"get_conversation_stats_api_v1_conversations_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/conversations/messages/{lead_id}":{"get":{"tags":["conversations"],"summary":"Get Conversation Messages","description":"Obtiene todos los mensajes de una conversación específica.\nUsado para renderizar el chat en el panel de conversaciones.","operationId":"get_conversation_messages_api_v1_conversations_messages__lead_id__get","parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}}],"requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/User"},{"type":"null"}],"title":"Current User"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/metrics":{"get":{"summary":"Metrics Page","description":"Página de métricas y análisis de leads con SSR.\nObtiene datos del servidor y los renderiza directamente.","operationId":"metrics_page_metrics_get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/conversations":{"get":{"summary":"Conversations Enhanced Page","description":"Panel principal de conversaciones en tiempo real con SSR.\nUtiliza el nuevo sistema enhanced con WebSocket y filtros avanzados.","operationId":"conversations_enhanced_page_conversations_get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/conversations/{lead_id}":{"get":{"summary":"Conversation Detail Page","description":"Página de detalle de conversación. SSR directo sin complejidad de modales.","operationId":"conversation_detail_page_conversations__lead_id__get","parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/contacts":{"get":{"summary":"Contacts Page","description":"Página de contactos con lista completa y filtros.\nGestión integral de leads y clientes.","operationId":"contacts_page_contacts_get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/contacts/new":{"get":{"summary":"New Contact Page","description":"Formulario para crear nuevo contacto.","operationId":"new_contact_page_contacts_new_get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/contacts/create":{"post":{"summary":"Create Contact","description":"Procesa la creación de un nuevo contacto.","operationId":"create_contact_contacts_create_post","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/contacts/{contact_id}":{"get":{"summary":"Contact Detail Page","description":"Página de detalle del contacto con actividades.","operationId":"contact_detail_page_contacts__contact_id__get","parameters":[{"name":"contact_id","in":"path","required":true,"schema":{"type":"string","title":"Contact Id"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/contacts/{contact_id}/activity/new":{"get":{"summary":"New Activity Page","description":"Formulario para crear nueva actividad para un contacto.\nSoporta tipos específicos vía query params.","operationId":"new_activity_page_contacts__contact_id__activity_new_get","parameters":[{"name":"contact_id","in":"path","required":true,"schema":{"type":"string","title":"Contact Id"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/contacts/{contact_id}/activity/create":{"post":{"summary":"Create Activity","description":"Procesa la creación de una nueva actividad.","operationId":"create_activity_contacts__contact_id__activity_create_post","parameters":[{"name":"contact_id","in":"path","required":true,"schema":{"type":"string","title":"Contact Id"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/contacts/{contact_id}/activity/{activity_id}/complete":{"post":{"summary":"Complete Activity","description":"Marca una actividad como completada.","operationId":"complete_activity_contacts__contact_id__activity__activity_id__complete_post","parameters":[{"name":"contact_id","in":"path","required":true,"schema":{"type":"string","title":"Contact Id"}},{"name":"activity_id","in":"path","required":true,"schema":{"type":"string","title":"Activity Id"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/contacts/{contact_id}/edit":{"get":{"summary":"Edit Contact Page","description":"Formulario para editar un contacto existente.","operationId":"edit_contact_page_contacts__contact_id__edit_get","parameters":[{"name":"contact_id","in":"path","required":true,"schema":{"type":"string","title":"Contact Id"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/contacts/{contact_id}/update":{"post":{"summary":"Update Contact","description":"Procesa la actualización de un contacto.","operationId":"update_contact_contacts__contact_id__update_post","parameters":[{"name":"contact_id","in":"path","required":true,"schema":{"type":"string","title":"Contact Id"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/contacts/{contact_id}/message":{"get":{"summary":"Message Contact Page","description":"Página para enviar mensaje de WhatsApp al contacto.","operationId":"message_contact_page_contacts__contact_id__message_get","parameters":[{"name":"contact_id","in":"path","required":true,"schema":{"type":"string","title":"Contact Id"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/contacts/{contact_id}/message/send":{"post":{"summary":"Send Whatsapp Message","description":"Envía un mensaje de WhatsApp usando Evolution API.","operationId":"send_whatsapp_message_contacts__contact_id__message_send_post","parameters":[{"name":"contact_id","in":"path","required":true,"schema":{"type":"string","title":"Contact Id"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/source-analytics":{"get":{"summary":"Source Analytics Page","description":"Dashboard de analytics de fuentes de leads.\nAnálisis granular de Facebook Ads, WhatsApp directo y ROI.\nMuestra campañas, creativos y distribución temporal en tiempo real.","operationId":"source_analytics_page_source_analytics_get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/api/dashboard/source-analytics/summary":{"get":{"summary":"Dashboard Source Summary","description":"Endpoint simplificado para dashboard de source analytics","operationId":"dashboard_source_summary_api_dashboard_source_analytics_summary_get","parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","default":30,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/dashboard/source-analytics/campaigns":{"get":{"summary":"Dashboard Facebook Campaigns","description":"Endpoint simplificado para campañas de Facebook del dashboard","operationId":"dashboard_facebook_campaigns_api_dashboard_source_analytics_campaigns_get","parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","default":30,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/dashboard/source-analytics/performance":{"get":{"summary":"Dashboard Performance Metrics","description":"Endpoint simplificado para métricas de performance del dashboard","operationId":"dashboard_performance_metrics_api_dashboard_source_analytics_performance_get","parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","default":30,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/dashboard/source-analytics/roi":{"get":{"summary":"Dashboard Roi Projection","description":"Endpoint simplificado para proyección ROI del dashboard","operationId":"dashboard_roi_projection_api_dashboard_source_analytics_roi_get","parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","default":30,"title":"Days"}},{"name":"cost_per_lead","in":"query","required":false,"schema":{"type":"number","default":5000,"title":"Cost Per Lead"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/performance":{"get":{"summary":"Performance Page","description":"Panel de decisiones comerciales con métricas de negocio.\nAnaliza rendimiento de ventas, agentes e IA.\nTodo calculado server-side (SSR) para decisiones en tiempo real.","operationId":"performance_page_performance_get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/documentation":{"get":{"summary":"Docs Redirect","description":"Redirect /documentation → /docs/","operationId":"docs_redirect_documentation_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/kanban-migration":{"get":{"summary":"Kanban Migration Redirect","description":"Redirect directo a análisis de migración Kanban","operationId":"kanban_migration_redirect_kanban_migration_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/migration-analysis":{"get":{"summary":"Migration Analysis Redirect","description":"Alias para acceso directo al análisis de migración","operationId":"migration_analysis_redirect_migration_analysis_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AIStatusResponse":{"properties":{"lead_id":{"type":"string","title":"Lead Id"},"ai_automation_enabled":{"type":"boolean","title":"Ai Automation Enabled"},"automation_status":{"type":"string","title":"Automation Status"},"is_manual_mode":{"type":"boolean","title":"Is Manual Mode"},"last_manual_interaction":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Manual Interaction"},"ai_pause_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ai Pause Reason"},"manual_agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Manual Agent Id"},"global_ai_enabled":{"type":"boolean","title":"Global Ai Enabled"}},"type":"object","required":["lead_id","ai_automation_enabled","automation_status","is_manual_mode","last_manual_interaction","ai_pause_reason","manual_agent_id","global_ai_enabled"],"title":"AIStatusResponse","description":"Modelo de respuesta para estado de automatización."},"AIToggleRequest":{"properties":{"enable_ai":{"type":"boolean","title":"Enable Ai","description":"True para AI, False para manual"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason","description":"Razón del cambio (opcional)"}},"type":"object","required":["enable_ai"],"title":"AIToggleRequest","description":"Modelo para solicitud de cambio AI/Manual."},"Body_activate_bot_configuration_api_v1_settings_wizard_step3_activate_post":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id","default":"celucambio_main"}},"type":"object","title":"Body_activate_bot_configuration_api_v1_settings_wizard_step3_activate_post"},"Body_activate_bot_configuration_settings_wizard_step3_activate_post":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id","default":"celucambio_main"}},"type":"object","title":"Body_activate_bot_configuration_settings_wizard_step3_activate_post"},"Body_analyze_website_automatic_api_v1_settings_wizard_step1_analyze_website_post":{"properties":{"website_url":{"type":"string","title":"Website Url"},"bot_purpose":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bot Purpose"},"tenant_id":{"type":"string","title":"Tenant Id","default":"celucambio_main"}},"type":"object","required":["website_url"],"title":"Body_analyze_website_automatic_api_v1_settings_wizard_step1_analyze_website_post"},"Body_analyze_website_automatic_settings_wizard_step1_analyze_website_post":{"properties":{"website_url":{"type":"string","title":"Website Url"},"bot_purpose":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bot Purpose"},"tenant_id":{"type":"string","title":"Tenant Id","default":"celucambio_main"}},"type":"object","required":["website_url"],"title":"Body_analyze_website_automatic_settings_wizard_step1_analyze_website_post"},"Body_clear_catalog_step2_api_v1_settings_wizard_step2_clear_delete":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id","default":"celucambio_main"}},"type":"object","title":"Body_clear_catalog_step2_api_v1_settings_wizard_step2_clear_delete"},"Body_clear_catalog_step2_settings_wizard_step2_clear_delete":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id","default":"celucambio_main"}},"type":"object","title":"Body_clear_catalog_step2_settings_wizard_step2_clear_delete"},"Body_configure_bot_personalization_api_v1_settings_wizard_step3_configure_post":{"properties":{"bot_name":{"type":"string","title":"Bot Name"},"greeting_message":{"type":"string","title":"Greeting Message"},"personality":{"type":"string","title":"Personality","default":"professional"},"tenant_id":{"type":"string","title":"Tenant Id","default":"celucambio_main"}},"type":"object","required":["bot_name","greeting_message"],"title":"Body_configure_bot_personalization_api_v1_settings_wizard_step3_configure_post"},"Body_configure_bot_personalization_settings_wizard_step3_configure_post":{"properties":{"bot_name":{"type":"string","title":"Bot Name"},"greeting_message":{"type":"string","title":"Greeting Message"},"personality":{"type":"string","title":"Personality","default":"professional"},"tenant_id":{"type":"string","title":"Tenant Id","default":"celucambio_main"}},"type":"object","required":["bot_name","greeting_message"],"title":"Body_configure_bot_personalization_settings_wizard_step3_configure_post"},"Body_process_business_data_api_v1_settings_wizard_step1_process_post":{"properties":{"business_description":{"type":"string","title":"Business Description"},"website_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Website Url"},"business_sector":{"type":"string","title":"Business Sector"},"tenant_id":{"type":"string","title":"Tenant Id","default":"celucambio_main"}},"type":"object","required":["business_description","business_sector"],"title":"Body_process_business_data_api_v1_settings_wizard_step1_process_post"},"Body_process_business_data_settings_wizard_step1_process_post":{"properties":{"business_description":{"type":"string","title":"Business Description"},"website_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Website Url"},"business_sector":{"type":"string","title":"Business Sector"},"tenant_id":{"type":"string","title":"Tenant Id","default":"celucambio_main"}},"type":"object","required":["business_description","business_sector"],"title":"Body_process_business_data_settings_wizard_step1_process_post"},"Body_send_audio_message_api_v1_conversations_send_audio_post":{"properties":{"conversation_id":{"type":"string","title":"Conversation Id"},"audio":{"type":"string","format":"binary","title":"Audio"}},"type":"object","required":["conversation_id","audio"],"title":"Body_send_audio_message_api_v1_conversations_send_audio_post"},"Body_send_file_message_api_v1_conversations_send_file_post":{"properties":{"conversation_id":{"type":"string","title":"Conversation Id"},"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["conversation_id","file"],"title":"Body_send_file_message_api_v1_conversations_send_file_post"},"Body_skip_catalog_step2_api_v1_settings_wizard_step2_skip_post":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id","default":"celucambio_main"}},"type":"object","title":"Body_skip_catalog_step2_api_v1_settings_wizard_step2_skip_post"},"Body_skip_catalog_step2_settings_wizard_step2_skip_post":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id","default":"celucambio_main"}},"type":"object","title":"Body_skip_catalog_step2_settings_wizard_step2_skip_post"},"Body_update_system_prompt_api_v1_settings_wizard_step1_update_system_prompt_post":{"properties":{"system_prompt":{"type":"string","title":"System Prompt"},"tenant_id":{"type":"string","title":"Tenant Id","default":"celucambio_main"}},"type":"object","required":["system_prompt"],"title":"Body_update_system_prompt_api_v1_settings_wizard_step1_update_system_prompt_post"},"Body_update_system_prompt_from_modal_api_v1_settings_update_system_prompt_post":{"properties":{"system_prompt":{"type":"string","title":"System Prompt"},"tenant_id":{"type":"string","title":"Tenant Id","default":"celucambio_main"}},"type":"object","required":["system_prompt"],"title":"Body_update_system_prompt_from_modal_api_v1_settings_update_system_prompt_post"},"Body_update_system_prompt_from_modal_settings_update_system_prompt_post":{"properties":{"system_prompt":{"type":"string","title":"System Prompt"},"tenant_id":{"type":"string","title":"Tenant Id","default":"celucambio_main"}},"type":"object","required":["system_prompt"],"title":"Body_update_system_prompt_from_modal_settings_update_system_prompt_post"},"Body_update_system_prompt_settings_wizard_step1_update_system_prompt_post":{"properties":{"system_prompt":{"type":"string","title":"System Prompt"},"tenant_id":{"type":"string","title":"Tenant Id","default":"celucambio_main"}},"type":"object","required":["system_prompt"],"title":"Body_update_system_prompt_settings_wizard_step1_update_system_prompt_post"},"Body_upload_catalog_alias_api_v1_settings_wizard_step2_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"},"enable_rag":{"type":"boolean","title":"Enable Rag","default":true},"tenant_id":{"type":"string","title":"Tenant Id","default":"celucambio_main"}},"type":"object","required":["file"],"title":"Body_upload_catalog_alias_api_v1_settings_wizard_step2_upload_post"},"Body_upload_catalog_alias_settings_wizard_step2_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"},"enable_rag":{"type":"boolean","title":"Enable Rag","default":true},"tenant_id":{"type":"string","title":"Tenant Id","default":"celucambio_main"}},"type":"object","required":["file"],"title":"Body_upload_catalog_alias_settings_wizard_step2_upload_post"},"Body_upload_catalog_step2_api_v1_settings_wizard_step2_upload_catalog_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"},"enable_rag":{"type":"boolean","title":"Enable Rag","default":true},"tenant_id":{"type":"string","title":"Tenant Id","default":"celucambio_main"}},"type":"object","required":["file"],"title":"Body_upload_catalog_step2_api_v1_settings_wizard_step2_upload_catalog_post"},"Body_upload_catalog_step2_settings_wizard_step2_upload_catalog_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"},"enable_rag":{"type":"boolean","title":"Enable Rag","default":true},"tenant_id":{"type":"string","title":"Tenant Id","default":"celucambio_main"}},"type":"object","required":["file"],"title":"Body_upload_catalog_step2_settings_wizard_step2_upload_catalog_post"},"Body_upload_product_catalog_api_v1_ai_config_tenant__tenant_id__upload_catalog_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"},"file_type":{"type":"string","title":"File Type"}},"type":"object","required":["file","file_type"],"title":"Body_upload_product_catalog_api_v1_ai_config_tenant__tenant_id__upload_catalog_post"},"Body_upload_specialist_document_api_v1_specialists__specialist_id__documents_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_specialist_document_api_v1_specialists__specialist_id__documents_post"},"Body_validate_business_summary_api_v1_settings_wizard_step1_validate_post":{"properties":{"summary_approved":{"type":"boolean","title":"Summary Approved"},"manual_edits":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Manual Edits"}},"type":"object","required":["summary_approved"],"title":"Body_validate_business_summary_api_v1_settings_wizard_step1_validate_post"},"Body_validate_business_summary_settings_wizard_step1_validate_post":{"properties":{"summary_approved":{"type":"boolean","title":"Summary Approved"},"manual_edits":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Manual Edits"}},"type":"object","required":["summary_approved"],"title":"Body_validate_business_summary_settings_wizard_step1_validate_post"},"Body_validate_catalog_step2_api_v1_settings_wizard_step2_validate_post":{"properties":{"catalog_approved":{"type":"boolean","title":"Catalog Approved"},"tenant_id":{"type":"string","title":"Tenant Id","default":"celucambio_main"}},"type":"object","required":["catalog_approved"],"title":"Body_validate_catalog_step2_api_v1_settings_wizard_step2_validate_post"},"Body_validate_catalog_step2_settings_wizard_step2_validate_post":{"properties":{"catalog_approved":{"type":"boolean","title":"Catalog Approved"},"tenant_id":{"type":"string","title":"Tenant Id","default":"celucambio_main"}},"type":"object","required":["catalog_approved"],"title":"Body_validate_catalog_step2_settings_wizard_step2_validate_post"},"BotConfigurationRequest":{"properties":{"bot_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bot Name"},"bot_personality":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bot Personality"},"bot_instructions":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bot Instructions"},"system_prompt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"System Prompt"},"bot_greeting":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bot Greeting"},"bot_farewell":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bot Farewell"},"bot_language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bot Language"},"bot_tone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bot Tone"},"conversation_rules":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Conversation Rules"},"prohibited_topics":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Prohibited Topics"},"escalation_triggers":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Escalation Triggers"}},"type":"object","title":"BotConfigurationRequest","description":"Request para actualizar configuración del bot."},"BusinessInfo":{"properties":{"business_name":{"type":"string","title":"Business Name","description":"Nombre del negocio","default":""},"business_type":{"type":"string","title":"Business Type","description":"Tipo de negocio","default":""},"locations":{"items":{"additionalProperties":{"type":"string"},"type":"object"},"type":"array","title":"Locations","description":"Ubicaciones físicas","default":[]},"business_hours":{"additionalProperties":{"type":"string"},"type":"object","title":"Business Hours","description":"Horarios de atención","default":{}},"payment_methods":{"items":{"type":"string"},"type":"array","title":"Payment Methods","description":"Métodos de pago disponibles","default":[]},"financing_options":{"additionalProperties":true,"type":"object","title":"Financing Options","description":"Opciones de financiación","default":{}},"credit_options":{"additionalProperties":true,"type":"object","title":"Credit Options","description":"Opciones de crédito","default":{}},"warranty_policy":{"type":"string","title":"Warranty Policy","description":"Política de garantía","default":""},"return_policy":{"type":"string","title":"Return Policy","description":"Política de devoluciones","default":""},"delivery_options":{"items":{"type":"string"},"type":"array","title":"Delivery Options","description":"Opciones de entrega","default":[]},"current_promotions":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Current Promotions","description":"Promociones actuales","default":[]},"discounts":{"additionalProperties":true,"type":"object","title":"Discounts","description":"Descuentos disponibles","default":{}},"contact_info":{"additionalProperties":{"type":"string"},"type":"object","title":"Contact Info","description":"Información de contacto","default":{}},"support_channels":{"items":{"type":"string"},"type":"array","title":"Support Channels","description":"Canales de soporte","default":[]},"response_tone":{"type":"string","title":"Response Tone","description":"Tono de respuestas","default":"profesional"},"brand_voice":{"type":"string","title":"Brand Voice","description":"Voz de marca","default":""},"custom_greetings":{"items":{"type":"string"},"type":"array","title":"Custom Greetings","description":"Saludos personalizados","default":[]}},"type":"object","title":"BusinessInfo","description":"Información del negocio configurable por tenant.\nSe envía como contexto adicional a N8N para personalizar respuestas."},"ClassificationHistory":{"properties":{"timestamp":{"type":"string","title":"Timestamp","description":"Momento exacto del cambio de etapa"},"old_stage":{"type":"string","title":"Old Stage","description":"Etapa anterior del lead"},"new_stage":{"type":"string","title":"New Stage","description":"Nueva etapa asignada"},"score":{"type":"integer","title":"Score","description":"Puntuación IA del lead (0-100)"},"justification":{"type":"string","title":"Justification","description":"Explicación IA del cambio"}},"type":"object","required":["timestamp","old_stage","new_stage","score","justification"],"title":"ClassificationHistory","description":"Representa un cambio en la clasificación del lead.\nRegistra transiciones automáticas de etapa con justificación IA.\nUsado para auditoría y análisis de comportamiento del lead."},"ConfigurationUpdateRequest":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id"},"ai_enabled":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Ai Enabled"},"rag_enabled":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Rag Enabled"},"business_info":{"anyOf":[{"$ref":"#/components/schemas/BusinessInfo"},{"type":"null"}]}},"type":"object","required":["tenant_id"],"title":"ConfigurationUpdateRequest","description":"Request para actualizar configuración de AI."},"ConversionAnalysisRequest":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id","description":"ID del tenant para análisis"},"date_from":{"type":"string","title":"Date From","description":"Fecha inicio del período de análisis"},"date_to":{"type":"string","title":"Date To","description":"Fecha fin del período de análisis"},"sources_filter":{"anyOf":[{"items":{"$ref":"#/components/schemas/LeadSource"},"type":"array"},{"type":"null"}],"title":"Sources Filter","description":"Filtrar por fuentes específicas"},"include_unconverted":{"type":"boolean","title":"Include Unconverted","description":"Incluir leads no convertidos","default":true},"group_by":{"type":"string","title":"Group By","description":"Agrupar por: source, campaign, medium","default":"source"},"metrics":{"items":{"type":"string"},"type":"array","title":"Metrics","description":"Métricas a incluir en el análisis","default":["conversion_rate","total_value","avg_days","roi"]}},"type":"object","required":["tenant_id","date_from","date_to"],"title":"ConversionAnalysisRequest","description":"Request para análisis de conversión por fuentes.\nDefine parámetros para generar reportes personalizados."},"ConversionReport":{"properties":{"report_date":{"type":"string","title":"Report Date","description":"Fecha de generación del reporte"},"date_from":{"type":"string","title":"Date From","description":"Fecha inicio del período"},"date_to":{"type":"string","title":"Date To","description":"Fecha fin del período"},"source_metrics":{"additionalProperties":{"additionalProperties":true,"type":"object"},"type":"object","title":"Source Metrics","description":"Métricas agrupadas por fuente"},"total_leads":{"type":"integer","title":"Total Leads","description":"Total de leads en el período","default":0},"total_conversions":{"type":"integer","title":"Total Conversions","description":"Total de conversiones","default":0},"total_conversion_value":{"type":"number","title":"Total Conversion Value","description":"Valor total de conversiones","default":0.0},"overall_conversion_rate":{"type":"number","title":"Overall Conversion Rate","description":"Tasa de conversión general","default":0.0},"average_days_to_conversion":{"type":"number","title":"Average Days To Conversion","description":"Promedio de días para conversión","default":0.0},"best_converting_source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Best Converting Source","description":"Fuente con mejor tasa de conversión"},"highest_value_source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Highest Value Source","description":"Fuente con mayor valor de conversión"},"best_roi_source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Best Roi Source","description":"Fuente con mejor ROI"}},"type":"object","required":["report_date","date_from","date_to"],"title":"ConversionReport","description":"Reporte completo de conversión por fuentes.\nContiene métricas agregadas para análisis de ROI y performance.\nUsado para dashboards de marketing y toma de decisiones."},"CreateSpecialistRequest":{"properties":{"type":{"$ref":"#/components/schemas/SpecialistType"},"personality":{"$ref":"#/components/schemas/SpecialistPersonality"},"initial_prompt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Initial Prompt"}},"type":"object","required":["type","personality"],"title":"CreateSpecialistRequest","description":"Request para crear un nuevo especialista."},"EscalationRequest":{"properties":{"lead_id":{"type":"string","title":"Lead Id","description":"ID del lead"},"reason":{"type":"string","title":"Reason","description":"Razón de escalación"},"original_message":{"type":"string","title":"Original Message","description":"Mensaje original"}},"type":"object","required":["lead_id","reason","original_message"],"title":"EscalationRequest","description":"Modelo para solicitud de escalación desde N8N."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"KanbanConfigurationCreate":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id","description":"Tenant propietario"},"name":{"type":"string","minLength":1,"title":"Name","description":"Nombre de la configuración"},"default_stage_id":{"type":"string","title":"Default Stage Id","description":"Etapa inicial"},"stages":{"items":{"$ref":"#/components/schemas/KanbanStage"},"type":"array","minItems":1,"title":"Stages","description":"Etapas del Kanban"},"enable_drag_drop":{"type":"boolean","title":"Enable Drag Drop","default":true},"show_empty_stages":{"type":"boolean","title":"Show Empty Stages","default":true},"show_stage_counts":{"type":"boolean","title":"Show Stage Counts","default":true},"auto_assignment_rules":{"additionalProperties":true,"type":"object","title":"Auto Assignment Rules"},"notification_settings":{"additionalProperties":true,"type":"object","title":"Notification Settings"},"ui_settings":{"additionalProperties":true,"type":"object","title":"Ui Settings"}},"type":"object","required":["tenant_id","name","default_stage_id","stages"],"title":"KanbanConfigurationCreate","description":"Modelo para crear nuevas configuraciones Kanban.\nDefine estructura mínima requerida para configuración válida.\nUsado al inicializar Kanban de nuevos tenants."},"KanbanConfigurationUpdate":{"properties":{"name":{"anyOf":[{"type":"string","minLength":1},{"type":"null"}],"title":"Name"},"default_stage_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Default Stage Id"},"enable_drag_drop":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Enable Drag Drop"},"show_empty_stages":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Show Empty Stages"},"show_stage_counts":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Show Stage Counts"},"stages":{"anyOf":[{"items":{"$ref":"#/components/schemas/KanbanStage"},"type":"array"},{"type":"null"}],"title":"Stages"},"auto_assignment_rules":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Auto Assignment Rules"},"notification_settings":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Notification Settings"},"ui_settings":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Ui Settings"},"custom_fields":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"title":"Custom Fields"},"integrations":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Integrations"},"updated_at":{"type":"string","title":"Updated At"}},"type":"object","title":"KanbanConfigurationUpdate","description":"Modelo para actualizar configuraciones existentes.\nPermite modificación de etapas y comportamientos.\nUsado por administradores para personalizar Kanban."},"KanbanResponse":{"properties":{"id":{"type":"string","title":"Id"},"tenant_id":{"type":"string","title":"Tenant Id"},"name":{"type":"string","title":"Name"},"default_stage_id":{"type":"string","title":"Default Stage Id"},"enable_drag_drop":{"type":"boolean","title":"Enable Drag Drop"},"show_empty_stages":{"type":"boolean","title":"Show Empty Stages"},"show_stage_counts":{"type":"boolean","title":"Show Stage Counts"},"stages":{"items":{"$ref":"#/components/schemas/KanbanStage"},"type":"array","title":"Stages"},"version":{"type":"integer","title":"Version"}},"type":"object","required":["id","tenant_id","name","default_stage_id","enable_drag_drop","show_empty_stages","show_stage_counts","stages","version"],"title":"KanbanResponse","description":"Modelo de respuesta optimizado para dashboard Kanban.\nIncluye configuración y estadísticas básicas.\nUsado para renderizado inicial del Kanban."},"KanbanStage":{"properties":{"id":{"type":"string","title":"Id","description":"Identificador único de la etapa"},"name":{"type":"string","title":"Name","description":"Nombre interno de la etapa"},"display_name":{"type":"string","title":"Display Name","description":"Nombre visible en UI"},"color":{"type":"string","title":"Color","description":"Color hexadecimal de la etapa"},"icon":{"type":"string","title":"Icon","description":"Icono FontAwesome de la etapa"},"order":{"type":"integer","title":"Order","description":"Orden de visualización en Kanban"},"stage_type":{"$ref":"#/components/schemas/StageType","description":"Tipo de etapa para lógica específica"},"is_visible":{"type":"boolean","title":"Is Visible","description":"Si la etapa se muestra en Kanban","default":true},"is_active":{"type":"boolean","title":"Is Active","description":"Si la etapa acepta nuevos leads","default":true},"is_default":{"type":"boolean","title":"Is Default","description":"Si es la etapa por defecto","default":false},"base_score":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Base Score","description":"Puntuación base de la etapa"},"auto_score":{"type":"boolean","title":"Auto Score","description":"Si se actualiza puntuación automáticamente","default":true},"allowed_transitions":{"items":{"type":"string"},"type":"array","title":"Allowed Transitions","description":"Etapas a las que puede transicionar"},"notifications_enabled":{"type":"boolean","title":"Notifications Enabled","description":"Si envía notificaciones WebSocket","default":true},"created_at":{"type":"string","title":"Created At","description":"Fecha de creación de la etapa"},"updated_at":{"type":"string","title":"Updated At","description":"Última modificación de la etapa"},"created_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created By","description":"Usuario que creó la etapa"},"description":{"type":"string","title":"Description","description":"Descripción detallada de la etapa","default":""},"help_text":{"type":"string","title":"Help Text","description":"Texto de ayuda para usuarios","default":""}},"type":"object","required":["id","name","display_name","color","icon","order","stage_type","base_score","created_at","updated_at"],"title":"KanbanStage","description":"Representa una etapa individual del Kanban.\nDefine propiedades visuales y comportamiento de la columna.\nUsado para renderizar columnas y validar movimientos."},"LeadAssignmentRequest":{"properties":{"agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id","description":"ID del agente asignado (null para desasignar)"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes","description":"Notas de la asignación","default":""}},"type":"object","title":"LeadAssignmentRequest","description":"Request para asignar lead a agente.\nIncluye ID del agente y notas opcionales."},"LeadClassificationRequest":{"properties":{"new_stage":{"type":"string","title":"New Stage","description":"Nueva etapa manual (label o ID)"},"new_stage_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"New Stage Id","description":"ID dinámico de la nueva etapa"},"justification":{"type":"string","title":"Justification","description":"Justificacion del cambio manual"},"override_ai":{"type":"boolean","title":"Override Ai","description":"Si override clasificacion IA","default":true}},"type":"object","required":["new_stage","justification"],"title":"LeadClassificationRequest","description":"Request para clasificacion manual de lead.\nPermite override de clasificacion automatica IA."},"LeadCreate":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id","description":"Tenant propietario del lead"},"full_name":{"type":"string","minLength":1,"title":"Full Name","description":"Nombre completo del lead"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone","description":"Teléfono del lead"},"source":{"type":"string","title":"Source","description":"Canal de origen","default":"whatsapp"},"funnel_stage":{"anyOf":[{"$ref":"#/components/schemas/LeadStage"},{"type":"string"},{"type":"null"}],"title":"Funnel Stage","description":"Referencia de etapa (id o label, legacy compatible)"},"kanban_stage_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Kanban Stage Id","description":"ID dinámico de la etapa (alias legacy)"},"funnel_stage_label":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Funnel Stage Label","description":"Nombre visible de la etapa (opcional)"},"priority":{"type":"string","title":"Priority","description":"Prioridad inicial","default":"normal"},"notes":{"type":"string","title":"Notes","description":"Notas iniciales","default":""},"tags":{"items":{"type":"string"},"type":"array","title":"Tags","description":"Etiquetas iniciales"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Metadatos adicionales"}},"type":"object","required":["tenant_id","full_name"],"title":"LeadCreate","description":"Modelo para crear nuevos leads.\nValida datos mínimos requeridos para crear lead en BD.\nUsado cuando llega el primer mensaje de un lead nuevo."},"LeadMoveRequest":{"properties":{"new_stage":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"New Stage","description":"Nombre o ID de la nueva etapa"},"new_stage_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"New Stage Id","description":"ID explícito de la nueva etapa"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes","description":"Notas del movimiento"}},"type":"object","title":"LeadMoveRequest","description":"Request para mover lead en Kanban.\nAcepta identificador dinámico o label legacy de la etapa."},"LeadResponse":{"properties":{"id":{"type":"string","title":"Id"},"tenant_id":{"type":"string","title":"Tenant Id"},"full_name":{"type":"string","title":"Full Name"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"funnel_stage":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Funnel Stage"},"funnel_stage_label":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Funnel Stage Label"},"kanban_stage_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Kanban Stage Id"},"current_score":{"type":"integer","title":"Current Score"},"message_count":{"type":"integer","title":"Message Count"},"created_at":{"type":"string","title":"Created At"},"last_interaction":{"type":"string","title":"Last Interaction"},"assigned_agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned Agent Id"},"priority":{"type":"string","title":"Priority"},"tags":{"items":{"type":"string"},"type":"array","title":"Tags"},"latest_classification":{"anyOf":[{"$ref":"#/components/schemas/ClassificationHistory"},{"type":"null"}]},"ai_automation_enabled":{"type":"boolean","title":"Ai Automation Enabled","default":true},"automation_status":{"type":"string","title":"Automation Status","default":"AI Automática"},"is_manual_mode":{"type":"boolean","title":"Is Manual Mode","default":false},"last_manual_interaction":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Manual Interaction"},"ai_pause_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ai Pause Reason"},"manual_agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Manual Agent Id"},"channel":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Channel"},"country_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Country Code"},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language"},"currency":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Currency"},"deal_value":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Deal Value"},"external_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"External Id"},"integration_source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Integration Source"},"last_agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Agent Id"},"last_agent_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Agent Name"},"sla_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sla Status"},"last_channel_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Channel At"},"conversation_context":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Conversation Context"},"context_confidence":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Context Confidence"},"context_updated_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Context Updated At"}},"type":"object","required":["id","tenant_id","full_name","phone","funnel_stage","funnel_stage_label","kanban_stage_id","current_score","message_count","created_at","last_interaction","assigned_agent_id","priority","tags"],"title":"LeadResponse","description":"Modelo de respuesta para datos de lead.\nIncluye información optimizada para dashboard Kanban.\nUsado en respuestas de API para visualización eficiente."},"LeadSource":{"type":"string","enum":["whatsapp_direct","whatsapp_web","facebook_ads","facebook_organic","instagram_ads","instagram_organic","instagram_stories","google_ads","google_organic","linkedin","tiktok","youtube","email_marketing","referral","direct_visit","other_social","manual_entry","evolution_api","chatwoot","n8n_automation","whatsapp"],"title":"LeadSource","description":"Define las fuentes de origen de leads.\nUsado para tracking de conversión y análisis de ROI por canal.\nCada fuente representa un canal de adquisición diferente."},"LeadStage":{"type":"string","enum":["Lead Iniciado","Lead en Exploración","Lead Interés Medio","Lead Interés Alto","Negocio Ganado","Negocio Perdido","Imposible Contactar","Contacto Futuro","Escalamiento con asesor"],"title":"LeadStage","description":"Define las etapas legacy disponibles en el sistema Kanban.\nCada valor representa el label histórico usado por las vistas Alpine.\nSe mantiene por compatibilidad mientras migramos a pipelines dinámicos."},"LeadUpdate":{"properties":{"full_name":{"anyOf":[{"type":"string","minLength":1},{"type":"null"}],"title":"Full Name"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"funnel_stage":{"anyOf":[{"$ref":"#/components/schemas/LeadStage"},{"type":"string"},{"type":"null"}],"title":"Funnel Stage"},"kanban_stage_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Kanban Stage Id"},"funnel_stage_label":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Funnel Stage Label"},"assigned_agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned Agent Id"},"priority":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Priority"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"tags":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tags"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"}},"type":"object","title":"LeadUpdate","description":"Modelo para actualizar leads existentes.\nPermite modificar campos manualmente desde dashboard.\nUsado por agentes y supervisores para gestión manual."},"LogResponseRequest":{"properties":{"lead_id":{"type":"string","title":"Lead Id","description":"ID del lead"},"message_sent":{"type":"string","title":"Message Sent","description":"Mensaje enviado"},"ai_processed":{"type":"boolean","title":"Ai Processed","description":"Procesado por AI","default":true},"timestamp":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Timestamp","description":"Timestamp"}},"type":"object","required":["lead_id","message_sent"],"title":"LogResponseRequest","description":"Modelo para registrar respuesta de AI desde N8N."},"LoginMultiTenantRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email","description":"Email del usuario"},"password":{"type":"string","minLength":1,"title":"Password","description":"Contraseña del usuario"}},"type":"object","required":["email","password"],"title":"LoginMultiTenantRequest","description":"Esquema para login multi-tenant (paso 1)"},"LoginMultiTenantResponse":{"properties":{"temp_token":{"type":"string","title":"Temp Token","description":"Token temporal para seleccionar tenant"},"user":{"$ref":"#/components/schemas/UserBasicInfo","description":"Información básica del usuario"},"tenants":{"items":{"$ref":"#/components/schemas/TenantInfo"},"type":"array","title":"Tenants","description":"Lista de tenants disponibles"},"expires_in":{"type":"integer","title":"Expires In","description":"Tiempo de expiración en segundos (10 min)","default":600}},"type":"object","required":["temp_token","user","tenants"],"title":"LoginMultiTenantResponse","description":"Respuesta del login multi-tenant (paso 1)"},"LoginRequest":{"properties":{"email":{"type":"string","title":"Email","description":"Email del usuario"},"password":{"type":"string","minLength":6,"title":"Password","description":"Contraseña del usuario"},"tenant_id":{"type":"string","title":"Tenant Id","description":"ID del tenant al que pertenece"}},"type":"object","required":["email","password","tenant_id"],"title":"LoginRequest","description":"Modelo de request para login de usuario.\nIncluye credenciales y tenant_id para autenticacion multi-tenant."},"LoginResponse":{"properties":{"access_token":{"type":"string","title":"Access Token","description":"Token JWT de acceso"},"token_type":{"type":"string","title":"Token Type","description":"Tipo de token","default":"bearer"},"user":{"$ref":"#/components/schemas/UserResponse","description":"Datos del usuario autenticado"},"expires_in":{"type":"integer","title":"Expires In","description":"Tiempo de vida del token en segundos","default":1800}},"type":"object","required":["access_token","user"],"title":"LoginResponse","description":"Modelo de respuesta exitosa de login.\nIncluye token JWT y datos básicos del usuario."},"MessageResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Si el mensaje se proces� exitosamente"},"message_id":{"type":"string","title":"Message Id","description":"ID del mensaje procesado"},"conversation_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Conversation Id","description":"ID de la conversaci�n"},"lead_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lead Id","description":"ID del lead asociado"},"classification_applied":{"type":"boolean","title":"Classification Applied","description":"Si se aplic� clasificaci�n IA","default":false}},"type":"object","required":["success","message_id"],"title":"MessageResponse","description":"Respuesta para mensajes procesados.\nIncluye informaci�n de procesamiento y estado."},"ProductUploadResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"type":"string","title":"Message"},"catalog_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Catalog Id"},"total_products":{"type":"integer","title":"Total Products","default":0},"processing_errors":{"items":{"type":"string"},"type":"array","title":"Processing Errors","default":[]}},"type":"object","required":["success","message"],"title":"ProductUploadResponse","description":"Response después de subir archivo de catálogo."},"PublishSpecialistRequest":{"properties":{"evolution_instance":{"type":"string","title":"Evolution Instance","description":"Instancia de Evolution API"},"evolution_phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Evolution Phone","description":"Número de WhatsApp (opcional, se puede asignar después)"}},"type":"object","required":["evolution_instance"],"title":"PublishSpecialistRequest","description":"Request para publicar un especialista."},"RegisterRequest":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id","description":"ID del tenant"},"username":{"type":"string","maxLength":50,"minLength":3,"title":"Username","description":"Nombre de usuario"},"email":{"type":"string","title":"Email","description":"Email del usuario"},"full_name":{"type":"string","title":"Full Name","description":"Nombre completo"},"password":{"type":"string","minLength":6,"title":"Password","description":"Contraseña"},"role":{"$ref":"#/components/schemas/UserRole","description":"Rol del usuario","default":"agente"}},"type":"object","required":["tenant_id","username","email","full_name","password"],"title":"RegisterRequest","description":"Modelo de request para registro de nuevo usuario.\nIncluye todos los datos necesarios para crear usuario en tenant."},"RegisterResponse":{"properties":{"message":{"type":"string","title":"Message","description":"Mensaje de confirmación"},"user":{"$ref":"#/components/schemas/UserResponse","description":"Datos del usuario creado"}},"type":"object","required":["message","user"],"title":"RegisterResponse","description":"Modelo de respuesta de registro exitoso.\nIncluye datos del usuario creado sin información sensible."},"SelectTenantRequest":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id","description":"ID del tenant seleccionado"}},"type":"object","required":["tenant_id"],"title":"SelectTenantRequest","description":"Esquema para seleccionar tenant (paso 2)"},"SelectTenantResponse":{"properties":{"access_token":{"type":"string","title":"Access Token","description":"Token de acceso final (24 horas)"},"token_type":{"type":"string","title":"Token Type","description":"Tipo de token","default":"bearer"},"user":{"$ref":"#/components/schemas/UserCompleteInfo","description":"Usuario con información del tenant"},"expires_in":{"type":"integer","title":"Expires In","description":"Tiempo de expiración en segundos (24 horas)","default":86400}},"type":"object","required":["access_token","user"],"title":"SelectTenantResponse","description":"Respuesta de selección de tenant (paso 2)"},"SpecialistPersonality":{"properties":{"name":{"type":"string","title":"Name","description":"Nombre del especialista"},"role":{"type":"string","title":"Role","description":"Rol/título del especialista"},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url","description":"URL del avatar"},"tone":{"type":"string","title":"Tone","description":"Tono de comunicación","default":"professional"},"personality_traits":{"items":{"type":"string"},"type":"array","title":"Personality Traits","description":"Rasgos de personalidad (amigable, técnico, empático, etc.)"},"language_style":{"type":"string","title":"Language Style","description":"Estilo de lenguaje (formal, informal, técnico)","default":"formal"},"response_style":{"type":"string","title":"Response Style","description":"Estilo de respuesta (concise, detailed, step-by-step)","default":"concise"},"empathy_level":{"type":"integer","maximum":10.0,"minimum":1.0,"title":"Empathy Level","description":"Nivel de empatía (1-10)","default":5},"technical_level":{"type":"integer","maximum":10.0,"minimum":1.0,"title":"Technical Level","description":"Nivel técnico en respuestas (1-10)","default":5}},"type":"object","required":["name","role"],"title":"SpecialistPersonality","description":"Configuración de personalidad del especialista."},"SpecialistStatus":{"type":"string","enum":["draft","testing","published","inactive","archived"],"title":"SpecialistStatus","description":"Estados del especialista."},"SpecialistTestMessage":{"properties":{"message":{"type":"string","title":"Message","description":"Mensaje del usuario"},"context":{"additionalProperties":true,"type":"object","title":"Context","description":"Contexto adicional para la prueba"}},"type":"object","required":["message"],"title":"SpecialistTestMessage","description":"Mensaje de prueba para el playground del especialista."},"SpecialistTestResult":{"properties":{"user_message":{"type":"string","title":"User Message"},"specialist_response":{"type":"string","title":"Specialist Response"},"confidence_score":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Confidence Score"},"sources_used":{"items":{"type":"string"},"type":"array","title":"Sources Used"},"processing_time_ms":{"type":"integer","title":"Processing Time Ms"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata"}},"type":"object","required":["user_message","specialist_response","confidence_score","processing_time_ms"],"title":"SpecialistTestResult","description":"Resultado de una prueba del especialista."},"SpecialistType":{"type":"string","enum":["sales","warranty","technical","billing","logistics","returns","customer","custom"],"title":"SpecialistType","description":"Tipos de especialistas disponibles."},"StageCreate":{"properties":{"id":{"type":"string","title":"Id","description":"ID único de la nueva etapa"},"name":{"type":"string","minLength":1,"title":"Name","description":"Nombre de la etapa"},"display_name":{"type":"string","minLength":1,"title":"Display Name","description":"Nombre visible"},"color":{"type":"string","pattern":"^#[0-9A-Fa-f]{6}$","title":"Color","description":"Color hexadecimal válido"},"icon":{"type":"string","title":"Icon","description":"Clase de icono FontAwesome"},"order":{"type":"integer","minimum":1.0,"title":"Order","description":"Posición en Kanban"},"stage_type":{"$ref":"#/components/schemas/StageType","description":"Tipo de etapa"},"base_score":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Base Score","description":"Puntuación base"},"description":{"type":"string","title":"Description","description":"Descripción de la etapa","default":""},"help_text":{"type":"string","title":"Help Text","description":"Texto de ayuda","default":""}},"type":"object","required":["id","name","display_name","color","icon","order","stage_type","base_score"],"title":"StageCreate","description":"Modelo para crear nuevas etapas en configuración existente.\nValida datos requeridos para nueva columna Kanban.\nUsado para expandir configuraciones Kanban existentes."},"StageType":{"type":"string","enum":["initial","progress","success","failure","waiting"],"title":"StageType","description":"Define los tipos de etapa en el sistema Kanban.\nCada tipo tiene comportamientos específicos en el flujo.\nUsado para lógica de transiciones y validaciones."},"StageUpdate":{"properties":{"name":{"anyOf":[{"type":"string","minLength":1},{"type":"null"}],"title":"Name"},"display_name":{"anyOf":[{"type":"string","minLength":1},{"type":"null"}],"title":"Display Name"},"color":{"anyOf":[{"type":"string","pattern":"^#[0-9A-Fa-f]{6}$"},{"type":"null"}],"title":"Color"},"icon":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Icon"},"order":{"anyOf":[{"type":"integer","minimum":1.0},{"type":"null"}],"title":"Order"},"stage_type":{"anyOf":[{"$ref":"#/components/schemas/StageType"},{"type":"null"}]},"is_visible":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Visible"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"},"base_score":{"anyOf":[{"type":"integer","maximum":100.0,"minimum":0.0},{"type":"null"}],"title":"Base Score"},"auto_score":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Auto Score"},"allowed_transitions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Allowed Transitions"},"notifications_enabled":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Notifications Enabled"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"help_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Help Text"},"updated_at":{"type":"string","title":"Updated At"}},"type":"object","title":"StageUpdate","description":"Modelo para actualizar etapas existentes.\nPermite modificación de propiedades visuales y comportamiento.\nUsado para personalizar etapas en configuraciones activas."},"SwitchTenantRequest":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id","description":"ID del nuevo tenant"}},"type":"object","required":["tenant_id"],"title":"SwitchTenantRequest","description":"Esquema para cambiar de tenant"},"SwitchTenantResponse":{"properties":{"access_token":{"type":"string","title":"Access Token","description":"Nuevo token de acceso (24 horas)"},"token_type":{"type":"string","title":"Token Type","description":"Tipo de token","default":"bearer"},"user":{"$ref":"#/components/schemas/UserCompleteInfo","description":"Usuario con información del nuevo tenant"},"expires_in":{"type":"integer","title":"Expires In","description":"Tiempo de expiración en segundos (24 horas)","default":86400}},"type":"object","required":["access_token","user"],"title":"SwitchTenantResponse","description":"Respuesta de cambio de tenant"},"TenantInfo":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id","description":"ID del tenant"},"tenant_name":{"type":"string","title":"Tenant Name","description":"Nombre del tenant/empresa"},"role":{"$ref":"#/components/schemas/UserTenantRole","description":"Rol del usuario en este tenant"},"status":{"$ref":"#/components/schemas/UserTenantStatus","description":"Estado de acceso al tenant"}},"type":"object","required":["tenant_id","tenant_name","role","status"],"title":"TenantInfo","description":"Información básica de tenant para respuestas multi-tenant"},"TransitionValidationRequest":{"properties":{"from_stage_id":{"type":"string","title":"From Stage Id","description":"ID de etapa origen"},"to_stage_id":{"type":"string","title":"To Stage Id","description":"ID de etapa destino"}},"type":"object","required":["from_stage_id","to_stage_id"],"title":"TransitionValidationRequest","description":"Request para validar transición entre etapas.\nUsado para validar drag & drop antes de ejecutar."},"TransitionValidationResponse":{"properties":{"valid":{"type":"boolean","title":"Valid","description":"Si la transición es válida"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason","description":"Razón si no es válida"}},"type":"object","required":["valid"],"title":"TransitionValidationResponse","description":"Respuesta de validación de transición.\nIndica si la transición es válida y razón si no lo es."},"UpdateSpecialistRequest":{"properties":{"personality":{"anyOf":[{"$ref":"#/components/schemas/SpecialistPersonality"},{"type":"null"}]},"system_prompt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"System Prompt"},"evolution_instance":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Evolution Instance"},"status":{"anyOf":[{"$ref":"#/components/schemas/SpecialistStatus"},{"type":"null"}]}},"type":"object","title":"UpdateSpecialistRequest","description":"Request para actualizar un especialista."},"User":{"properties":{"_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id"},"tenant_id":{"type":"string","title":"Tenant Id","description":"ID del tenant al que pertenece el usuario"},"username":{"type":"string","maxLength":50,"minLength":3,"title":"Username","description":"Nombre de usuario único dentro del tenant"},"email":{"type":"string","format":"email","title":"Email","description":"Email único dentro del tenant"},"full_name":{"type":"string","maxLength":200,"minLength":1,"title":"Full Name","description":"Nombre completo del usuario"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone","description":"Número de WhatsApp para autenticación con códigos"},"role":{"$ref":"#/components/schemas/UserRole","description":"Rol del usuario en el sistema"},"password_hash":{"type":"string","title":"Password Hash","description":"Hash seguro de la contraseña"},"is_active":{"type":"boolean","title":"Is Active","description":"Usuario activo en el sistema","default":true},"can_move_cards":{"type":"boolean","title":"Can Move Cards","description":"Permiso para mover tarjetas Kanban","default":true},"comments":{"type":"string","title":"Comments","description":"Comentarios adicionales del usuario","default":""},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Fecha de creación del usuario"},"updated_at":{"type":"string","format":"date-time","title":"Updated At","description":"Última modificación del usuario"},"last_login":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Login","description":"Última sesión iniciada"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Metadatos adicionales del usuario"}},"type":"object","required":["tenant_id","username","email","full_name","role","password_hash"],"title":"User","description":"Modelo principal de usuario con soporte multi-tenant.\nTodos los usuarios pertenecen a un tenant específico.\nManeja autenticación, roles y permisos por tenant."},"UserBasicInfo":{"properties":{"id":{"type":"string","title":"Id","description":"ID del usuario"},"email":{"type":"string","title":"Email","description":"Email del usuario"},"username":{"type":"string","title":"Username","description":"Username del usuario"},"full_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Name","description":"Nombre completo del usuario"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone","description":"Teléfono del usuario"}},"type":"object","required":["id","email","username"],"title":"UserBasicInfo","description":"Información básica de usuario para respuestas multi-tenant"},"UserCompleteInfo":{"properties":{"id":{"type":"string","title":"Id","description":"ID del usuario"},"email":{"type":"string","title":"Email","description":"Email del usuario"},"username":{"type":"string","title":"Username","description":"Username del usuario"},"full_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Name","description":"Nombre completo"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone","description":"Teléfono"},"tenant_id":{"type":"string","title":"Tenant Id","description":"ID del tenant activo"},"role":{"$ref":"#/components/schemas/UserTenantRole","description":"Rol en el tenant activo"},"is_active":{"type":"boolean","title":"Is Active","description":"Usuario activo","default":true},"can_move_cards":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Can Move Cards","description":"Permisos de Kanban"}},"type":"object","required":["id","email","username","tenant_id","role"],"title":"UserCompleteInfo","description":"Información completa de usuario con tenant seleccionado"},"UserCreate":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id","description":"Tenant al que pertenecerá el usuario"},"username":{"type":"string","maxLength":50,"minLength":3,"title":"Username"},"email":{"type":"string","format":"email","title":"Email"},"full_name":{"type":"string","maxLength":200,"minLength":1,"title":"Full Name"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone","description":"Número de WhatsApp para autenticación con códigos"},"password":{"type":"string","minLength":6,"title":"Password","description":"Contraseña en texto plano"},"role":{"$ref":"#/components/schemas/UserRole","default":"agente"},"is_active":{"type":"boolean","title":"Is Active","description":"Usuario activo en el sistema","default":true},"can_move_cards":{"type":"boolean","title":"Can Move Cards","default":true},"comments":{"type":"string","title":"Comments","default":""},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata"}},"type":"object","required":["tenant_id","username","email","full_name","password"],"title":"UserCreate","description":"Modelo para crear nuevos usuarios.\nValida datos requeridos antes de crear usuario en BD.\nUsado en endpoints de registro y creación de usuarios."},"UserResponse":{"properties":{"id":{"type":"string","title":"Id"},"tenant_id":{"type":"string","title":"Tenant Id"},"username":{"type":"string","title":"Username"},"email":{"type":"string","title":"Email"},"full_name":{"type":"string","title":"Full Name"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"role":{"$ref":"#/components/schemas/UserRole"},"is_active":{"type":"boolean","title":"Is Active"},"can_move_cards":{"type":"boolean","title":"Can Move Cards"},"comments":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Comments"},"created_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"last_login":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Login"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"}},"type":"object","required":["id","tenant_id","username","email","full_name","role","is_active","can_move_cards"],"title":"UserResponse","description":"Modelo de respuesta para datos de usuario.\nExcluye información sensible como password_hash.\nUsado en respuestas de API para datos seguros."},"UserRole":{"type":"string","enum":["system_admin","administrador","agente","supervisor","viewer"],"title":"UserRole","description":"Define los roles disponibles en el sistema CRM.\nCada rol tiene permisos específicos para operaciones del sistema.\nUsado para controlar acceso a funcionalidades por tenant."},"UserTenantRole":{"type":"string","enum":["system_admin","administrador","agente","supervisor","viewer"],"title":"UserTenantRole","description":"Roles disponibles para usuario en un tenant específico"},"UserTenantStatus":{"type":"string","enum":["active","suspended","inactive"],"title":"UserTenantStatus","description":"Estado de la relación usuario-tenant"},"UserUpdate":{"properties":{"username":{"anyOf":[{"type":"string","maxLength":50,"minLength":3},{"type":"null"}],"title":"Username"},"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"},"full_name":{"anyOf":[{"type":"string","maxLength":200,"minLength":1},{"type":"null"}],"title":"Full Name"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone","description":"Número de WhatsApp para autenticación con códigos"},"password":{"anyOf":[{"type":"string","maxLength":100,"minLength":6},{"type":"null"}],"title":"Password"},"role":{"anyOf":[{"$ref":"#/components/schemas/UserRole"},{"type":"null"}]},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"},"can_move_cards":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Can Move Cards"},"comments":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Comments"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","title":"UserUpdate","description":"Modelo para actualizar usuarios existentes.\nTodos los campos son opcionales para updates parciales.\nUsado en endpoints de modificación de perfiles."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"WhatsAppCodeValidationRequest":{"properties":{"code_id":{"type":"string","title":"Code Id","description":"ID del código a validar"},"code":{"type":"string","maxLength":6,"minLength":6,"title":"Code","description":"Código de 6 dígitos"},"tenant_id":{"type":"string","title":"Tenant Id","description":"ID del tenant para validación adicional"}},"type":"object","required":["code_id","code","tenant_id"],"title":"WhatsAppCodeValidationRequest","description":"Modelo de request para validar código WhatsApp.\nContiene código ingresado por usuario."},"WhatsAppLoginRequest":{"properties":{"email":{"type":"string","title":"Email","description":"Email del usuario"},"tenant_id":{"type":"string","title":"Tenant Id","description":"ID del tenant al que pertenece"}},"type":"object","required":["email","tenant_id"],"title":"WhatsAppLoginRequest","description":"Modelo de request para solicitar código de verificación WhatsApp.\nSolo requiere email y tenant para solicitar código."},"WhatsAppLoginResponse":{"properties":{"message":{"type":"string","title":"Message","description":"Mensaje de confirmación"},"code_id":{"type":"string","title":"Code Id","description":"ID del código para validación"},"phone_masked":{"type":"string","title":"Phone Masked","description":"Teléfono enmascarado"},"expires_in_minutes":{"type":"integer","title":"Expires In Minutes","description":"Minutos de validez"},"sent_via_whatsapp":{"type":"boolean","title":"Sent Via Whatsapp","description":"Confirmación de envío"}},"type":"object","required":["message","code_id","phone_masked","expires_in_minutes","sent_via_whatsapp"],"title":"WhatsAppLoginResponse","description":"Modelo de respuesta para solicitud de código WhatsApp.\nConfirma envío sin revelar información sensible."}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}